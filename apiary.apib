FORMAT: 1A
HOST: https://sandbox-staging.imp-siemens.com

# SiMobility Connect V2

This is the description of version 2 of the public REST interface to the integrated mobility platform *SiMobility Connect* by Siemens AG ("Connect"). 

For demo access, please write an email to `connect.mobility@siemens.com`. Clients are authorized by Basic Authentication. The base URL for calling the API is https://sandbox-staging.imp-siemens.com


[![](https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Siemens-logo.svg/200px-Siemens-logo.svg.png)](http://www.mobility.siemens.com/mobility/global/de/integrierte-mobilitaet/imp/seiten/default.aspx)
© Siemens AG 2017. All rights reserved


# General
* All coordinates are in the WGS84 system, in longitude, latitude order with units of decimal degrees. Example for a location in Berlin: *[13.387444, 52.523969]*
* Dates and time are represented in RFC-3339 format with an optional time zone offset. Example: *"2014-07-10T14:23:11+02:00"*
* Connect supports English and German and defaults to English. Integrated services may support additional languages but may also not translate all content from their default language. The language can be set in the `Accept-Language` header according to the RFC-2616 standard. Example: *de-DE* or just *de*
* Parts of the response data structure might be omitted if the information is not available. Example: A car sharing operator might not provide the fuel type of its cars

# Metadata
The data provided by Connect originates from various integrated services. These are bundled into different mobility categories which are structured as resources.  

Usually, a resource request returns a response with a common metadata header. For each integrated service relevant to this request, the metadata header contains a field that describes general information regarding the respective service and its provider. Such information includes a service specific alias name, site URI, data refresh timestamp, and warning or error messages.
Warning messages are provided when request attributes are ignored or unsupported by the integrated services. Error messages refer to failures occuring during interaction with these services.

## Data Structures

### Unit (enum)
- second
- minute
- hour
- day
- x
- kilometerperhour
- meterpersecond
- mileperhour
- kilometer
- meter
- mile
- Eurocent
- Euro
- Usd
- Chf
- gram
- kilogram
- liter
- cubicmeter
- gallon
- ampere
- milliampere
- volt
- watt
- kilowatt
- kelvin
- degreecelsius
- joule
- kilowatthour
- kilocalories
- Aed
- Unknown

### Message (object)
+ code (enum)
    + 
    + service.unavailable
    + service.not.available.in.region
    + trafficType.Car.not.supported
    + service.has.been.filtered
    + origin.equal.or.too.close.to.destination
    + date.time.not.in.allowed.period
    + invalid.trip.origin
    + invalid.trip.destination
+ message (string)
+ type (enum)
    + 
    + INFO
    + WARNING
    + ERROR

### Address (object)
+ citycode (string, nullable) 
+ city: Berlin (string)
+ street: Friedrichstadtpalast (string)
+ affix (string, nullable)
+ houseno (string, nullable)
+ district (string, nullable)
+ region (string, nullable)
+ country: Germany (string)
+ countryCode (string, nullable) - 2-letter ISO code
+ poBox (string, nullable)

### GeoJsonPoint (object)
+ type: Point (string, required) - Geo JSON geometry type
+ coordinates (array, required)
    + 13.38744394 (number) - longitude
    + 52.52396949 (number) - latitude

### Bike Sharing Meta Data (object)
+ serviceAlias: `nextbike` (string, required) - Short name of this integrated service
+ webUiUrl: `http://www.nextbike.de/de/standorte/` (string, required) - URI of this service provider
+ lastUpdateTime: `2014-07-10T14:11:02+02:00` (string) - Timestamp when the data of the integrated service was last refreshed
+ messages (array[Message]) - Warning and error messages. Common examples: `service.unavailable`, `service.not.available.in.region`, or `trafficType.Car.not.supported`

### Bike Sharing Base (object)
+ actions (array)- To initiate transactional steps like booking, reservation, and cancellation
    + (object)
        + name: `book` (string)
        + method: `POST` (string)
        + uri: `Resources/BikeSharing/Stations/3177225/Process?action=book` (string)
+ id: 3177225 (number, required) - ID of Connect
+ description: `Friedrichstadtpalast` (string) - Usually the license ID, approximate location, or name of bike
+ type: Stations (enum, required)
    + Stations
    + Bikes
+ uri: `Resources/BikeSharing/Stations/3177225` (string) - URI to request details
+ location (GeoJsonPoint, required)
+ provider: nextbike (string) - Alias of service provider
+ availability: 100 (number) - Current availability in percentage. "=0" or "=100" in case of floating bike
+ externalId: 3165145 (string) - Identification number of service provider
+ operator: `nextbike Berlin` (string) - Company operating the bike fleet. Commonly same as provider

### Car Sharing Floating Meta Data (object)
+ serviceAlias: `driveNow` (string, required) - Short name of this integrated service
+ webUiUrl: `https://de.drive-now.com/` (string, required) - URI of this service provider
+ lastUpdateTime: `2016-09-27T08:25:28+00:00` (string) - Timestamp when the data of the integrated service was last refreshed
+ messages (array[Message]) - Common examples: "service.unavailable", service.not.available.in.region, "date.time.not.in.allowed.period", "origin.equal.or.too.close.to.destination", or "trafficType.Car.not.supported"

### Car Sharing Station Meta Data (object)
+ serviceAlias: `flinkster` (string, required) - Short name of this integrated service
+ webUiUrl: `https://www.flinkster.de/` (string, required) - URI of this service provider
+ lastUpdateTime: `2016-09-27T11:42:58+00:00"` (string) - Timestamp when the data of the integrated service was last refreshed
+ messages (array[Message]) - Common examples: "service.unavailable", service.not.available.in.region, "date.time.not.in.allowed.period", "origin.equal.or.too.close.to.destination", or "trafficType.Car.not.supported"

### Car Sharing Base (object)
+ actions (array)- To initiate transactional steps like booking, reservation, and cancellation
    + (object)
        + name: `book` (string)
        + method: `POST` (string)
        + uri: `Resources/CarSharing/Cars/36629/Process?action=book` (string)
+ id: 36629 (number, required) - ID of Connect
+ description: `Richard` (string) - Usually the license ID, approximate location, or name of car
+ type: Cars (enum, required)
    + Stations
    + Cars
+ uri: `Resources/CarSharing/Cars/36629` (string) - URI to request details
+ location (GeoJsonPoint, required)
+ provider: driveNow (string) - Alias of service provider
+ availability: 100 (number) - Current availability in percentage. "=0" or "=100" in case of floating car
+ externalId: `DriveNow_13513776` (string) - Identification number of service provider
+ operator: `DriveNow` (string) - Company operating the car fleet. Commonly same as provider

### Car Sharing Car (Car Sharing Base)
+ type: CarSharingCar (string, required)
+ model: `MINI 5-Tuerer`(string) 
+ address (Address)
+ licenseId: `M-DX6689`(string) - License plate number
+ category (string, nullable)
+ fuelType: PETROL(enum)
    + PETROL
    + ELECTRICITY
    + LPG
    + HYDROGEN
    + HYBRID
    + UNKNOWN
+ fuelLevel: 55 (number)
+ imageLink (string, nullable)

### Car Sharing Station (object)
+ actions (array)- To initiate transactional steps like booking, reservation, and cancellation
    + (object)
        + name: `book` (string)
        + method: `POST` (string)
        + uri: `Resources/CarSharing/Stations/4516/Process?action=book` (string)
+ id: 4516 (number, required) - ID of Connect
+ description: `U-Bahnhof Senefelder Platz` (string) - Usually the approximate location
+ type: CarSharingStation (string, required)
+ uri: `Resources/CarSharing/Stations/4516` (string) - URI to request details
+ location (GeoJsonPoint, required)
+ provider: flinkster (string) - Alias of service provider
+ availability: 100 (number)
+ externalId: `402673` (string) - Identification number of service provider
+ operator: `FlinksterDB` (string) - Company operating the car fleet. Commonly same as provider
+ phoneNo (string, nullable)
+ operatorURI (string, nullable)
+ operatorName: `FlinksterDB` (string)
+ address (Address) - If the address isn't structured it's entirely included in `street`
+ openingHours (string, nullable)

### EV Charging Meta Data (object)
+ serviceAlias: `vattenfall` (string) - Short name of this integrated service
+ webUiUrl: `http://vmz.de/Vattenfall` (string) - URI of this service provider
+ lastUpdateTime: `2014-07-10T12:06:09+02:00` (string) - Timestamp when the data of the integrated service was last refreshed
+ messages (array[Message]) - Warning and error messages. Common examples: `service.unavailable`, `service.not.available.in.region`, or `trafficType.Car.not.supported`

### EV Plug Type (enum)
- `AVCON`
- `CCS_COMBO_1_PLUG`
- `CHADEMO`
- `IEC_60309_SINGLE_PHASE`
- `IEC_60309_THREE_PHASE`
- `LARGE_PADDLE_INDUCTIVE`
- `NEMA_5_20`
- `SMALL_PADDLE_INDUCTIVE`
- `TESLA`
- `TYPE_1_CONNECTOR`
- `TYPE_2_CONNECTOR`
- `TYPE_2_OUTLET`
- `TYPE_3_OUTLET`
- `TYPE_E_FRENCH_STANDARD`
- `TYPE_F_SCHUKO`
- `TYPE_G_BRITISH_STANDARD`
- `TYPE_J_SWISS_STANDARD`
- `UNKNOWN`

### EV Charging Base (object)
+ actions (array)- To initiate transactional steps like booking, reservation, and cancellation
+ id: 268355 (number, required) - ID of Connect
+ description: `Conti` (string)
+ type: EVChargingStation (string, required)
+ uri: `Resources/EVCharging/Stations/268355` (string) - URI to request details
+ location (GeoJsonPoint, required)
+ provider: vattenfall (string) - Alias of service provider
+ availability: 0 (number) - Current availability in percentage. "=0" or "=100" in case of floating bike
+ externalId: 3165145 (string) - Identification number of service provider
+ operator: `Vattenfall` (string) - Company operating the bike fleet. Commonly same as provider
+ address (Address) - If the address isn't structured it's entirely included in `street`
+ plugTypes (array, fixed)
    + (EV Plug Type)
        + Sample
            + `TYPE_2_OUTLET`
+ power
    + unit (Unit)
        + Sample
            + watt
    + value: 11040 (number)

### Public Transport Meta Data (object)
+ serviceAlias: `gtfsBerlin` (string) - Short name of this integrated service
+ webUiUrl: `http://www.vbb.de/` (string) - URI of this service provider
+ lastUpdateTime: `2016-09-23T12:22:10+00:00` (string) - Timestamp when the data of the integrated service was last refreshed
+ messages (array[Message]) - Warning and error messages. Common examples: `service.unavailable`, `service.not.available.in.region`, or `trafficType.Car.not.supported`

### Station Type (enum)
- MetroStation
- CityTrainStation
- TrainStation
- BusStation
- TramStation
- RegioTrainStation
- FerryStation
- BusTramStation
- GondolaStation
- FunicularStation
- PublicTransportStation

### Traffic Type (enum)
- Walk
- BikeSharing
- OwnBike
- CarSharing
- OwnCar
- PublicTransit
- Metro
- CityTrain
- Train
- Bus
- Tram
- RegioTrain
- Ferry
- Gondola
- Funicular
- Taxi
- Unknown
- Other

### Service Offering Base (object)
+ id: 5581 - ID of Connect
+ name: `CarSharing Router`
+ url: `https://www.siemens.com`
+ category
    + id: 58 (number)
    + name: `JourneyPlanner`
+ ownerName (string, nullable)
+ contact (string, nullable)
+ shortDescription (string, nullable)
+ geographicalInformation (string, nullable)
+ validFrom: 1500024751458 (number)
+ validTo: 1516789951458 (number)
+ noticePeriod: 10 - Notice period in no of days
+ version: 1 (number)
+ serviceSubscriptionProcessName: subscribeWithAcceptance
+ serviceUsageProcessName (string, nullable)
+ features (array)
    + (object)
        + id: 55882
        + type: LIST
        + interfaceType (string, nullable)
        + priceModelType (string, nullable)
        + url (string, nullable)
        + documentation (string, nullable)
+ serviceAlias: carSharingRouting
+ serviceProviderName: Siemens
+ serviceProviderStatus: ACTIVE
+ serviceCosts (array)
+ businessBoundary (object)
+ businessBoundaryFileName (string, nullable)
+ businessBoundaryUploadTime (string, nullable)
+ businessBoundaryViaServic: false (boolean) - whether Business Boundary uploaded via service
+ termsAndConditionsUrl  (string, nullable)
+ integrationServiceName: `carsharingrouter.default`

# Group Routing

## Trip Proposals [/imp-endpoint/api/V2/TripProposals/IMR] 

+ Attributes
    + metaData (array)
        + (object)
            + serviceAlias: `mvvRouting` (string) - Short name of this integrated service
            + webUiUrl: `http://www.mvv-muenchen.de/` (string) - URI of this service provider
            + lastUpdateTime: `2017-06-21T16:08:14+02:00` (string) - Timestamp when the data of the integrated service was last refreshed
            + messages - Warning and error messages. Common examples: `service.unavailable`, `service.not.available.in.region`, or `trafficType.Car.not.supported`
                + code: `routing.constraints.not.supported`
                + message (nullable)
                + type: `WARNING`
    + tripProposals (array)
        + (object)
            + url: `TripProposals/IMR/3504572` (string, required) - URI to request more details 
            + origin (required) - type `TimedLocation` or `PublicTransportTimedLocation` 
                + location
                    + coordinates: 11.64891, 48.09126 (array[number])
                    + type: Point
                + address: `Ramersdorf-Perlach, Otto-Hahn-Ring 6` - Address of lortion or name of public transport station
                + level (string, nullable) - Level inside building
                + time: `2017-06-21T14:19:00+02:00` - Scheduled time of departure
                + type: `TimedLocation`
            + destination (required) - type `TimedLocation` or `PublicTransportTimedLocation` 
                + location
                    + coordinates: 11.7861, 48.35374 (array[number])
                    + type: Point
                + address: `Flughafen München` - Address of location or name of public transport station
                + level (string, nullable) - Level inside building
                + time: `2017-06-21T15:15:00+02:00` - Scheduled time of arrival
                + stationId: 29510 (string) - Station ID of Connect
                + direction (string, nullable)
                + platform: `1/2` (string) - Scheduled platform
                + expectedPlatform (string, nullable) - Real-time platform
                + expectedTime: `2017-06-21T15:15:00+02:00` - Real-time arrival or departure time
                + type: `PublicTransportTimedLocation`
            + trafficTypes (array, required) - Modes of transport included in this trip. `PublicTransit` is a generic value for public transport modes of unknown type. Other is used in segments with start/stop procedures for car/bike sharing, car rental, and car parking.
                + (Traffic Type)
                    + Sample
                        + CityTrain
                + Walk
                + Metro
            + provider: `mvvRouting` (string)
            + description: `00:56 Minute(s)` - Contains a short textual description of this trip (required)
            + costs (required)
                + distance (nullable)
                + duration - Travel times for some trafficTypes may contain extra times. Example: 2 minutes set-up time and 1 minute return time for free-floating car sharing and bike sharing; 2 minutes set-up time and 0 minutes return time for station-based car and bike sharing, 5 minutes parking time for free-floating car sharing and own car.
                    + unit(Unit)
                        + Sample: minute
                    + value: 56 (number)
                + price
                    + unit (Unit)
                        + Sample: Euro
                    + value: 11.2 (number)
                + emission (nullable)
                + ticketPrice
                    + unit (Unit)
                        + Sample: Euro
                    + value: 11.2 (number)
                    + operatorId (nullable)
                    + ticketId: `EINZE-4`
                    + tariffLevel (nullable)
                    + departureZone (nullable)
                    + arrivalZone (nullable)

### Get Trip Proposals  [POST]
Get a list of trip proposals with basic information for specified trip search criteria. Results can only be intermodal if an intermodal service is subscribed. Otherwise results are mono- or multimodal. 

+ Attributes
    + origin (object, required) - `stationID` prevails over `location`
        + location (optional) - Addresses can be converted to coordinates through "Geo Locations"
            + type: Point (string, required) - Geo JSON geometry type
            + coordinates (array, required)
                + 11.649413 (number) - longitude
                + 48.091621 (number) - latitude
        + stationId (string, optional)
    + destination (object, required) - `stationID` prevails over `location`
        + location (optional) - Addresses can be converted to coordinates through "Geo Locations"
            + type: Point (string, required) - Geo JSON geometry type
            + coordinates (array, required)
        + stationId: 29510 (string, optional)
    + trafficTypes (array, fixed, required) - Modes of transport to use when calculating trips. Results may not contain all, subject to integrated services.
        + (Traffic Type)
            + Sample
                + Public Transit
        + OwnCar
    + viaPoints (array) - List of geolocations or `stationID` the trip should pass in the given sequence. Not supported by all integrated services.
        + (object)
            + location (object, optional)
            + stationId (string, optional)
    + time: `2017-06-21T14:02:00+02:00` (string, optional) - Date and time of the trip. Not all integrated services support times in the past
        + Default: Current server time
    + departureTime: true (boolean, optional) - True: time is used as departure time. False: time is used as arrival time
        + Default: true
    + costFunctions (array) - Trip proposals are ranked accordingly. Default values are set by integrated service, otherwise min duration. Not supported by all integrated services.
        + (object)
            + costType: Duration (enum)
                + Duration
                + Distance
                + Emission
                + Price
            + percentage: 100 (number)
                + Default: 0
    + routingConstraints (array) - Constraints to be considered in the search for trip proposals. Default values are set by integrated service. Not supported by all integrated services.
        + (object)
            + routingConstraintType: Distance (enum)
                - Distance
                - Duration
                - Price
                - Eco
                - Speed
                - StepFreeAccess
                - Delay
                - RoadSafety
                - Other
            + trafficType (Traffic Type)
                + Sample
                    + Walk
            + min
                + unit (Unit)
                    + Sample
                        + Meter
                + value: 0 (number)
            + max
                + unit (Unit)
                    + Sample
                        + Meter
                + value: 500 (number)
    + maxRoutingResponses: 1 (number, optional) - Number of trip proposals to be returned for each integrated service. Maximum is 10. Default values are set by integrated service. Not supported by all integrated services.
    + maxHops (number, optional) - Number of tranfers for each integrated service. Not supported by all integrated services.
    + numOfTravelers (number, optional) - Not supported by all integrated services.
    + traveler - Not supported by all integrated services.
        + travellerId
        + age (number)
        + dateOfBirth
        + type
        + givenName
        + lastName
        + address
        + phoneNo
        + countryCode
        + mobileNo
        + title
        + email
        + discountCards (array)
        + relationship (array)
    + classes(array) - e.g 1st class or 2nd class - Not supported by all integrated services.
    + includeDetails(boolean) - Flag to include trip segment details 

+ Request (application/json)

+ Response 200 (application/json)

    + Attributes (Trip Proposals)

## Trip Proposal with Details [/imp-endpoint/api/V2/TripProposals/IMR/{proposalId}]

+ Attributes
    + url: `TripProposals/IMR/3507015/` (string, required)
    + segments (array, required) - List of route segments
        + (object)
            + segmentId: `1` (string, required)
            + description: `Walk 469 m` (required) - Contains a short textual description of the segment
            + origin (required) - Type `TimedLocation` or `PublicTransportTimedLocation`
                + location
                    + coordinates: 11.64891, 48.09126 (array[number])
                    + type: Point
                + address: `Ramersdorf-Perlach, Otto-Hahn-Ring 6` - Address of location or name of public transport station
                + level (string, nullable) - Level inside building
                + time: `2017-06-21T14:19:00+02:00` - Scheduled time of departure
                + type: `TimedLocation`
            + destination (required) - type `TimedLocation` or `PublicTransportTimedLocation` 
                + location
                    + coordinates: 11.64522, 48.08888 (array[number])
                    + type: Point
                + address: `Neuperlach Süd` - Address of location or name of public transport station
                + level (string, nullable) - Level inside building
                + time: `2017-06-21T16:28:00+02:00` - Scheduled time of arrival
                + stationId: 28302 (string) - Station ID of Connect
                + direction (string, nullable)
                + platform: `1` (string) - Scheduled platform
                + expectedPlatform (string, nullable) - Real-time platform
                + expectedTime: `2017-06-21T16:28:00+02:00` - Real-time arrival or departure time
                + type: `PublicTransportTimedLocation`
            + trafficType: Walk (required) - Traffic type contained in the segment.
            + line (string, nullable) - Line information for a public transport segment
            + cancelled: false (boolean)
            + notes (nullable)- Example: "Reservation only"
            + cost (required)
                + distance
                    + unit(Unit)
                        + Sample: meter
                    + value: 469 (number)
                + duration - Travel times for some trafficTypes may contain extra times. Example: 2 minutes set-up time and 1 minute return time for free-floating car sharing and bike sharing; 2 minutes set-up time and 0 minutes return time for station-based car and bike sharing, 5 minutes parking time for free-floating car sharing and own car.
                    + unit(Unit)
                        + Sample: minute
                    + value: 9 (number)
                + price (nullable)
                + emission (nullable)
                + ticketPrice (nullable)
            + wayPoints (required) - List of way points to render the segment in a map
                + coordinates (array, required)
                    + (array)
                        + 11.64891
                        + 48.09126
                    + (array)
                        + 11.64859
                        + 48.09128
                    + (array)
                        + 11.64522
                        + 48.08888
                + type: LineString (required)
            + guidingPoints (array) - List of guiding points with intermediate public transport stops or turn-by-turn instructions for walking, cycling, and driving. This information is not yet available for all integrated services.
                + (object)
                    + description: `ORIGIN STRAIGHT at`
                    + timedLocation
                        + location
                            + coordinates: 11.64891, 48.09126 (array[number])
                            + type: Point
                        + address (nullable)
                        + level (nullable)
                        + time (nullable)
                        + type: TimedLocation
                    + cost (nullable)
                    + operator (nullable)
                    + pointId (nullable)
                    + comment (array)
                        + (object)
                            + text: STRAIGHT
                            + type: INFO
                        + (object)
                            + text: ORIGIN
                            + type: WARNING
            + externalOperatorId (string, nullable)
        + (object)
            + segmentId: `2` (string, required)
            + description: `U5 towards Laimer Platz` (required) - Contains a short textual description of the segment
            + origin (required) - Type `TimedLocation` or `PublicTransportTimedLocation`
                + location
                    + coordinates: 11.64522, 48.08888 (array[number])
                    + type: Point
                + address: `Neuperlach Süd` - Address of location or name of public transport station
                + level (string, nullable) - Level inside building
                + time: `2017-06-21T16:28:00+02:00` - Scheduled time of departure
                + stationId: 28302 (string) - Station ID of Connect
                + direction: `Laimer Platz` (string, nullable)
                + platform: `1` (string) - Scheduled platform
                + expectedPlatform (string, nullable) - Real-time platform
                + expectedTime: `2017-06-21T16:28:00+02:00` - Real-time arrival or departure time
                + type: `PublicTransportTimedLocation`
            + destination (required) - type `TimedLocation` or `PublicTransportTimedLocation` 
                + location
                    + coordinates: 11.60367, 48.12815 (array[number])
                    + type: Point
                + address: `Ostbahnhof` - Address of location or name of public transport station
                + level (string, nullable) - Level inside building
                + time: `2017-06-21T16:38:00+02:00` - Scheduled time of arrival
                + stationId: 26546 (string) - Station ID of Connect
                + direction (string, nullable)
                + platform: `U-Bahn 1` (string) - Scheduled platform
                + expectedPlatform (string, nullable) - Real-time platform
                + expectedTime: `2017-06-21T16:38:00+02:00` - Real-time arrival or departure time
                + type: `PublicTransportTimedLocation`
            + trafficType: Metro (required) - Traffic type contained in the segment.
            + line: `U5` (string, nullable) - Line information for a public transport segment
            + cancelled: false (boolean)
            + notes (nullable)- Example: "Reservation only"
            + cost (required)
                + distance (nullable)
                + duration - Travel times for some trafficTypes may contain extra times. Example: 2 minutes set-up time and 1 minute return time for free-floating car sharing and bike sharing; 2 minutes set-up time and 0 minutes return time for station-based car and bike sharing, 5 minutes parking time for free-floating car sharing and own car.
                    + unit(Unit)
                        + Sample: minute
                    + value: 10 (number)
                + price (nullable)
                + emission (nullable)
                + ticketPrice (nullable)
            + wayPoints (required) - List of way points to render the segment in a map
                + coordinates (array, required)
                    + (array[number])
                        + 11.64521
                        + 48.08886
                    + (array[number])
                        + 11.64859
                        + 48.09128
                    + (array[number])
                        + 11.60371
                        + 48.12815
                + type: LineString (required)
            + guidingPoints (array) - List of guiding points with intermediate public transport stops or turn-by-turn instructions for walking, cycling, and driving. This information is not yet available for all integrated services.
                + (object)
                    + description: `Therese-Giehse-Allee- Gleis 1`
                    + timedLocation
                        + location
                            + coordinates: 11.64275, 48.09466 (array[number])
                            + type: Point
                        + address: `Therese-Giehse-Allee, München` (nullable)
                        + level (nullable)
                        + time: `2017-06-21T16:29:00+02:00` (nullable)
                        + stationId: 28939 (string) - Station ID of Connect
                        + direction (string, nullable)
                        + platform: `Gleis 1` (string) - Scheduled platform
                        + expectedPlatform (string, nullable) - Real-time platform
                        + expectedTime (string, nullable) - Real-time arrival or departure time
                        + type: `PublicTransportTimedLocation`
                    + cost (nullable)
                    + operator (nullable)
                    + pointId (nullable)
                    + comment (nullable)
                    + externalOperatorId (string, nullable)
            

### Get Trip Proposal with Details [GET] 
Get details of a specific trip proposal.
A single trip proposal object with detailed information. A trip proposal consists of one or more segments, each segment has one trafficType. Successive segments may have the same trafficType. Each segment has an origin and a destination with corresponding timestamps when to arrive and depart.
A segment can contain a a sequence of wayPoints and guidingPoints.
A wayPoint describes an intermediate geo location useful for displaying a trip course in a map.
A guidingPoint can be an intermediate public transport station or a turn-by-turn instruction. It gives a traveler hints on how to travel, e.g. whenever to change the road at a crossing. GuidingPoints are a subset of wayPoints.

For a car and bike-sharing-segments `operatorId` and `unitId` are provided. For public transport segments `stationId` and `direction` are provided. For `Train`, `RegioTrain`, `CityTrain`, and `Metro`, `platform` and `expectedPlatform` may be provided.

Note: The trip proposals as returned by "Get Trip Proposals" are internally stored only for a certain time; afterward they expire and details are no longer available. The current expiration time is 10 minutes. Trip proposals can be based on real-time-data and should not be kept longer than necesseary.

+ Parameters
    + proposalId (string, `3507015`, required) ... Trip proposal ID of Connect. Can be retrieved through "Get Trip Proposals". 

+ Response 200 (application/json)

    + Attributes (Trip Proposal with Details)
    
# Group Stations and Timetables

## Public Transport Stations [/imp-endpoint/api/V2/Resources/PublicTransport/Stations{?lat}{?lng}{?radius}{?f_stations}{?filter}] 

+ Attributes 
    + metaData(array[Public Transport Meta Data])
    + resources (array)
        + (Public Transport Station with Details)
            + type: PublicTransportStation (string, required)
            + lines (array) - Lines departing at the station. Duplicates are possible due to different start and final stations.
                + (object)
                    + name: U2
                    + trafficType (Traffic Type)
                        + Sample
                            + Metro

### Get Public Transport Stations [GET]
Get a list of all public transport stations contained within a specified area. 
This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `600`) ... Radius of bounding circle in meter.
    + f_stations (optional, array, `[{"stationType":"BusTramStation"}]`) ... Filter to retrieve stations of a specific `stationType`.
    + filter (optional, string, `Oranienstr`) ... Free text filter. Multiple strings are combined by OR.

+ Response 200 (application/json)
    + Attributes (Public Transport Stations)

## Public Transport Station with Details [/imp-endpoint/api/V2/Resources/PublicTransport/Stations/{stationId}]

+ Attributes
    + actions (array)- To initiate transactional steps like booking, reservation, and cancellation
    + id: 33986 (number, required) - ID of Connect
    + description: `U Rosa-Luxemburg-Platz (Berlin)` (string, required)
    + type: PublicTransportStationDetails (string, required)
    + uri: `Resources/PublicTransport/Stations/33986` (string) - URI to request details
    + location (GeoJsonPoint, required)
    + provider: gtfsBerlin (string, required) - Alias of service provider
    + availability: 100 (number, required) - Current availability in percentage. "=0" or "=100" in case of floating bike
    + externalId: 9100016 (string) - Identification number of service provider
    + operator: `VBB` (string) - Company operating the bike fleet. Commonly same as provider
    + stationType (Station Type, required) - Main station type. `PublicTransportStation` is a generic type for stations without information about deparing lines.
        + Sample
            + MetroStation
    + platforms (string, nullable) - Platforms of the station
    + wheelChair (boolean) - Wheel chair accessibility.
    + stationTypes (array) - Each station type. `PublicTransportStation` is a generic type for stations without information about deparing lines.
        + (Station Type)
            + Sample
                + MetroStation
    + lines (array) - Lines departing at the station
        + (object)
            + name: U2
            + trafficType (Traffic Type)
                + Sample
                    + Metro
            + operator: Berliner Verkehrsbetriebe
            + network: Berliner Verkehrsbetriebe
            + origin: `S+U Pankow (Berlin)`
            + destination: `U Deutsche Oper (Berlin)`
            + description (string, nullable)

### Get Public Transport Station with Details [GET] 
Get details of a specific public transport station. 

+ Parameters
    + stationId (string, `33986`, required) ... Station ID of Connect. Can be retrieved through "Public Transport Stations".
        
+ Response 200 (application/json)
    + Attributes (Public Transport Station with Details)

## Time Table of a Station [/imp-endpoint/api/V2/Resources/PublicTransport/Stations/{id}/TimeTables{?time}]

+ Attributes 
    + metaData(array[Public Transport Meta Data])
    + resources (array)
        + (Public Transport Station with Details)
            + type: PublicTransportStationTimeTable
            + arrivals (nullable)
            + departures (array)
                + (object)
                    + direction: `U Theodor-Heuss-Platz (Berlin)` (required)
                    + line: `U2` (required)
                    + trafficType (Traffic Type, required)
                         + Sample
                            + Metro
                    + platform (string, nullable) - Scheduled platform
                    + expectedPlatform (string, nullable) - Real-time platform
                    + aimedTime: `2017-06-14T17:32:00+02:00` - Scheduled departure time (required)
                    + expectedTime: `2017-06-14T17:32:00+02:00` - Real-time departure time
                    + cancelled: false (boolean) - True: departure got cancelled

### Get a time table [GET] 
Get departure times at a specified station.

+ Parameters
    + id (string, `2532`, required) ... Station ID of Connect. Can be retrieved through "Get Public Transport Stations".
    + time: `2017-06-14T17:31:00+02:00` (string, optional) - Date and time for which the arrivals and departures shall be returned
        + Default: Current server time
        
+ Response 200 (application/json)
    + Attributes (Time Table of a Station)

# Group Ticketing
This is a group of all public transport ticketing related rest resources.

Usually, a ticket is bought in three steps: First, the available tickets for a defined service will be requested. Then the selected ticket will be bought and finally the receipt of the ticket has to be confirmed.
    
## Available Tickets [/imp-endpoint/api/V2/Resources/Ticketing/Tickets?action=book]    
Get a list of available products (tickets) for specified origin and destination. Both are public transport stations and are identified by `{pointId}`. 
PointId can be retrieved using `GET /imp-endpoint/api/V2/Resources/PublicTransport/Stations`

The data structure of the request:

attribute | json data type | comments
--- | --- | ---
origin | Object | Point id and/or address string (depending on Service HandyTicket requires address while ZPS/Nova does not need it.).To be specified for way-based request.
destination | Object | Point id and address string.To be specified for way-based request.
viaPoints | Object | List of stations IDs as well as geo locations the route should pass (Optional)
numberOfTickets | Object | Number of tickets (Depending on service-to-be-used).
ticketingCategory | String | Code for category defined by the operator, e.g. service class and specified zone. Range of values for Berlin: B0, B1, B2, B3.Range of values for Switzerland:2361,125,4092.Optional for way-based/connection-based request.Mandatory for product-based request.
outwardProposalId | String |Trip id for outward trip.To be specified for connection-based request.
returnProposalId | String |Trip id for return trip.To be specified for connection-based request.
medium | Object | Media of ticket. (Optional)
classes | Object | Classes of ticket for eg. 1st Class/2nd Class. (Optional)
type | Object | Type of trip for ticket for eg. Single-Trip Ticket/Return-Trip Ticket.
travellers | Object | List of  traveller information (Optional)
time | Object | Time of departure for way based trip
returnTime | Object| Time of departure for return journey(if specified).

Based on the ticketing-service to-be-used , certain attributes have been provided and shall be used in the request accordingly.

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
actions | Array | List of available actions on this resource (buy/confirm)
id | Number | Resource id
description | String | 
type | String | 
uri | URI | URI to request more details (where available)
location | Object | Standard GeoJSON with 'Point' geometry type. { "type": "Point", "coordinates": ["longitude":Number, "latitude":Number] }
provider | String | Service provider
operator | String | Name of Ticket Operator
tariffText | String | Contains Zone and Validity information
tariffInformation | String | Conditions applied for ticket
price | double | Price of ticket
currency | String | Currency

HTTP Headers:
- Accept-Language: This header specifies the language to be used for the attributes obtained in the respone, which is the list of tickets obtained. Examples: de, en, fr, it. The supported languages depend on the individual services. Not all information may be translated from the default language of the service.
    
### Getting available tickets [POST]

    
+ Request (application/json)

    + Body
    
            { 
             "origin": { 
             "id": "130", 
             "address": "Dresden Hauptbahnhof"
             },
             "destination": { 
             "id": "130", 
             "address": "Dresden Postplatz" 
             },
             "numberOfTickets": "1",
             "ticketingCategory": "B0",
             "viaPoints": []
            }

+ Response 200 (application/json)

    + Body
    
            {
                [
                    {
                        "actions": [
                            {
                                "name": "buy",
                                "method": "POST",
                                "uri": "Resources/Ticketing/Tickets/{resourceId}/Process?action=buy"
                            }
                        ],
                        "id": {resourceId},
                        "description": null,
                        "type": null,
                        "uri": "Resources/Ticketing/Tickets/157",
                        "location": null,
                        "provider": null,
                        "operator": "handyticket",
                        "tariffText": "DVB VVO-Einzelfahrt normal Preisstufe 1 für Zone Dresden gültig 18.11.13 12:21 Uhr bis 13:21 Uhr.",
                        "tariffInformation": "Gilt in der angegebenen Tarifzone; max. 1 Std.",
                        "price": 
                        {
                            "unit": "Chf",
                            "value": 2.8
                        }

                    }
                ]
            }

## Buy a Ticket [/imp-endpoint/api/V2/Resources/Ticketing/Tickets/{id}/Process?action=buy]    
The response contains details of a bought ticket, identified by {ticketIds} and {ticketContent} 

The data structure of the request body:

attribute | json data type | comments
--- | --- | ---
operator | OperatorCredentials | operator credentails details
userName | String | application user name who wants to buy the ticket
validityPeriodStartTime | String | Validity period start time for selected ticket 

The data structure of OperatorCredentials contains the following attributes:

attribute | json data type | comments
--- | --- | ---
name | String | Name of Ticket Operator (handyticket or zpsnova depending on service)
userId | String | Traveler Id ( Depends on the ticketing-serivce to be used.)
password | String | Password for buying ticket ( Depends on the ticketing-serivce to be used.)

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
actions | Array | List of available actions on this resource (confirm)
processId | Number | BPMN process id
confirmation | Object | Buy ticket response data


confirmation contains following fields:

attribute | json data type | comments
--- | --- | ---
requestId | String | Resource id received while initiating the booking
ticketIds | Array | Array of ticket ids 
ticketContent | Base64Binary | Content of Ticket
price | Object | Price of ticket with currency and value specified. 
ticketType | String | Type of ticket
productionDateTime | Calendar | Timestamp of production of ticket. 
ticketingCategory | String | Category of ticket
tariffInfo | String | Information about tariff zones
validFromDay |Calendar| Ticket valid from date 
validFromTime | Calendar| Ticket valid from time
validToDay | Calendar| Ticket valid to day
validToTime | Calendar | Ticket valid to time
discountCard | String | Discount card used
discountCardCode | String | Discount card code
travelClass | String | Travel Class (i.e 1st or 2nd Class)
medium | String | Type of Ticket (E-Ticket or Ticket on paper)
tripType | String |  Type of trip ( One-way or return)
validityPeriod | Object | validity Period of ticket
originId | String| Station ID of origin 
originAddress | String | Address of origin 
destinationId | String| Station ID of destination
destinationAddress | String | Address of destination
vias | String | Segments in travel route
traveller | Object | Containts information about the traveller
fqCode | String | Maps to the fqCode provided by the ticketing service provider
ticketingDescription | String | Type of ticket (One-way or return ticket)
tariffInformation | String | Concatenated information about tariff 
tariffText | String | Concatenated information about tariff 
securityCode | String | maps to the SecurityCode provided by the ticketing service provider
customerSegmentName | String |  Customer segment (e.g. Half-Fare travelcard).  
usageConditons | String | Conditions under which ticket can be used
serviceConditions | String | Special conditions for general usage
referenceNo | String | maps to the referenceNo provided by the ticketing service provider
travelClassText | String | Travel class mentioned in ticket
ticketOriginLabel | String | "From:" (Translated based on language header specified)
ticketDestinationLabel | String | "To:" (Translated based on language header specified)
includingVatLabel | String | "Incl."  (Translated based on language header specified)
vatLabel | String | "VAT"  (Translated based on language header specified)
mediumDesc | String | Special information for the type of this ticket (e.g. online ticket has special conditions). 
vat | Integer | Amount of value added tax


HTTP Headers:
- userToken: Token in the response received to {{host}}/imp-endpoint/api/{{version}}/Partners/User/Process?action=register
- Accept-Language: This header specifies the language of the attribues in the buy request to be sent. Examples: de, en, fr, it. The supported languages depend on the individual services. Not all information may be translated from the default language of the service.

### Buying a ticket [POST]


+ Parameters
    + id (string, `9347`, required) ... Ticket ID of Connect.
    
+ Request (application/json)

    + Headers
        
            userToken: {someUserToken} 

    + Body
    
            {
                "operator": {
                    "name": "handyticket",
                    "userId": "01805006013",
                    "password": "7555"
                },
                "validityPeriodStartTime": "15:41:00.000"
            }
   
+ Response 201 (application/json)

    + Body
    
            {
                "actions": [
                    {
                        "name": "confirm",
                        "method": "PUT",
                        "uri": "Processes/{processId}?action=confirm"
                    }
                ],
                "processId": {processId},
                "confirmation": {
                    "featureType": "BUY",
                    "confirmationId": null,
                    "confirmationData": {
                        "requestId": "{resourceid}"
                        "ticketIds": [
                            "274946704480125"
                        ],
                        "ticketContent": "UEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaVZWUkdMVGdpUHo0TkNqeDBhV15yWlhSRmNuZGxjbUp6VUhKdmVtVnpjMUpsYzNCdmJuTmxQZzBLSUNBOGNISmxhWE0rTWl3eU1Ed3ZjSEpsYVhNK0RRb2dJRHgzWVdWb2NuVnVaejVGVlZJOEwzZGhaV2h5ZFc1blBnMEtJQ0E4WVdkVVpYaDBQakY0SUVSV1FpQldWazh0UldsdWVtVnNabUZvY25RZ2JtOXliV0ZzSUZCeVpXbHpjM1IxWm1VZ01TQm13N3h5SUZwdmJtVWdSSEpsYzJSbGJpQm53N3hzZEdsbklERXpMakV4TGpFeklEQTFPalV6SUZWb2NpQmlhWE1nTURZNk5UTWdWV2h5TGp3dllXZFVaWGgwUGcwS0lDQThiV1Z6YzJGblpTQjBlWEJsUFNKM1lYSnVhVzVuSWo0OEwyMWxjM05oWjJVK0RRb2dJRHh1ZFhSNlpYSWdMejROQ2lBZ1BHSmxjbVZqYUhScFozVnVaMlZ1UGcwS0lDQWdJRHhpWlhKbFkyaDBhV2QxYm1jK0RRb2dJQ0FnSUNBOGMzUmhkSFZ6UGpBOEwzTjBZWFIxY3o0TkNpQWdJQ0FnSUR4MGVYQStNVHd2ZEhsd1BnMEtJQ0FnSUNBZ1BIQjJQall3TmpBOEwzQjJQZzBLSUNBZ0lDQWdQSEJ5YVcxaFpYSkxkbkErTmpBeE16d3ZjSEpwYldGbGNrdDJjRDROQ2lBZ0lDQWdJRHh6Wld0MWJtUmhaWEpMZG5BK05qQXhNend2YzJWcmRXNWtZV1Z5UzNad1BnMEtJQ0FnSUNBZ1BIQnliMlIxYTNSRGIyUmxQakU4TDNCeWIyUjFhM1JEYjJSbFBnMEtJQ0FnSUNBZ1BHZGxZbWxsZEhOSGRXVnNkR2xuYTJWcGRENHdQQzluWldKcFpYUnpSM1ZsYkhScFoydGxhWFErRFFvZ0lDQWdJQ0E4ZW1WcGRFZDFaV3gwYVdkclpXbDBQakE4TDNwbGFYUkhkV1ZzZEdsbmEyVnBkRDROQ2lBZ0lDQWdJRHh1ZFhSNlpYSlVlWEErTUR3dmJuVjBlbVZ5Vkhsd1BnMEtJQ0FnSUNBZ1BITjBZWEowV205dVpUNHhNRHd2YzNSaGNuUmFiMjVsUGcwS0lDQWdJQ0FnUEd0dmJXWnZjblErTVR3dmEyOXRabTl5ZEQ0TkNpQWdJQ0FnSUR4eGRXRnNhWFJoWlhRK01Ud3ZjWFZoYkdsMFlXVjBQZzBLSUNBZ0lDQWdQR0psYzJOb2NtVnBZblZ1Wno1RVZrSWdWbFpQTFVWcGJucGxiR1poYUhKMElHNXZjbTFoYkNCUWNtVnBjM04wZFdabElERWdac084Y2lCYWIyNWxJRVJ5WlhOa1pXNGdaOE84YkhScFp5QXhNeTR4TVM0eE15QXdOVG8xTXlCVmFISWdZbWx6SURBMk9qVXpJRlZvY2k0OEwySmxjMk5vY21WcFluVnVaejROQ2lBZ0lDQWdJRHgwWVhKcFptbHVabTgrUjJsc2RDQnBiaUJrWlhJZ1lXNW5aV2RsWW1WdVpXNGdWR0Z5YVdaNmIyNWxPeUJ0WVhndUlERWdVM1JrTGp3dmRHRnlhV1pwYm1adlBnMEtJQ0FnSUNBZ1BITnBZMmhsY21obGFYUnpUV1Z5YTIxaGJENUZUakV0TVRBdE1UTXhNVEExTlRNS1VDb3FNekV5TXpFeU16aDJDazF2ZEdsMklEUXhPVFV6TlRNM05qY0tMUzFVUlZOVUxTMVVTVU5MUlZRdExRbzhMM05wWTJobGNtaGxhWFJ6VFdWeWEyMWhiRDROQ2lBZ0lDQWdJRHhpWVhKamIyUmxQbWxXUWs5U2R6QkxSMmR2UVVGQlFVNVRWV2hGVldkQlFVRkpORUZCUVVOUFEwRk5RVUZCUkZGSk9FRTJRVUZCUVVKc1FrMVdSVmd2THk4NFFVRkJRbFozZEU0clFVRkJSVFZGYkVWUlZsSTBNblV5WXpJeU4ycE5RWGhGYkdZdkx6WlhNVkppUXpKU05UbEVjR3NyWTJoQ1ZHSlpTa3haT0hScGFHVm9jVTl6TVRsbVppdDJjamRtYmpJNVpuUTFaSEk1WkRNdk1TdDJZaXQyYmpWNlpsZ3laR051SzNodU4wVmtkSEpKU25nclkyOVdNRzV1ZDA1MlRVODBMMjR2WlVsMEwwRmtaSHA0UlU5TVoyNUJSREozWlhWcVVFZEhZMFV4Y1ZBeU1pdHZNM1EwS3pkbWRUUmxXRVJQVGpBdkwzazBUbnB0ZEhveFlWQnphMVpaVFRoR2VrbGlUbkJzZFZCaVMwMUdkMlZ1VERkMGRYTkxZM2hVYTNReWJGWkljbTFQZHpaT0szVktaMnhQV0U5VWJFZFhjbnB1UWxOeFVXVnpSbnBuV0daSVowMU5PVVJMWlRaeGRUWTRkWFYxY1VRM2MySTNORXg0T1M5UGNTc3ZkVVpHWjI1SVJqTnhaR3RQY21rMk4zUjFkMDlsU1RsV2IyNTNSRkUwWm1GR1YxTkNXVzByV2t0Vk1FWlZiME0yVUVJM0wwOUtaM3BOV2pKbGVua3JjMDkyTkdGWEt6RnJWM2xZZW5OT1JHaHRabmd2YldWVWRtNVJkRXBVU2tsSk5tSkViMDU2YkdsNE0yZFpRMHRHU1djMGNsSlRjVlJ5UWs4eWFrWlBSVXA0TlhOMWVsVmhVbTR6VFVaRlpGSllNRWxTTlVGSmFFMVFiWGd4VUdjM016STJOa1pOVFVsdFJuZGxhMHBsUm5sUFZubEVlRnB1V0hsM1prczRVMFY0ZFhkTlJHaEZha1pEY1RsV04yZGFSbEJzT0UxdVJtUkNiMk50Tmt0bGRVNVBVVkpKZHpSM1kxTnRXRVpNWlV0RWFXTkJSbEZFY0VaVGFUQjZRbXN2YmpBMU9VOUxlREZQWjNoalJEYzRhbk5RY0RSWk1sTkxVM0E0VDBsRmQzQjZaVlo2ZEhWWldWaERTVzVxV25FeGMzUXJUV3MxTWtOV1RsRkZjbUk0WTFScGRHUkdPRk16YWtKRk9XdFRjVXB0TlVjeFIwRmFTR2RsYm14cFVtTjNiRmhwYmpST2NGUXlhM0JuUVhsQ1MxRnZUM1EwWlZsdmNYcEZTRVJsU25sRFNIZFRUREJ6VTBsT1ZFb3lhRXRKWlc1NmVWbFlNakZKTTBwWE4wTmxSMFJvT1c5bVpWVnhObHBWU0ZSNlJGcEljVUY1VVZBeFQzY3ZRMWxZUzFKcGJERjVRMGd5YVhKaWJsZFJlbGR0ZUZkR2R6VnJVMEpEY0djclMxWTBVVGxqYkhWaVQwRkRNbmR0UW5kNVduQmtTMWR1TkVaUGVtbEtjM1JzVG1scmQyRkZWMVZETDJKb1FuZFRTM05XWTNkclFsQTVkRVpETkVWNlEwSnVXbTR2VW5scVkzRXlWWEJDY3k5U1EwVm9ZMDFwY0dOWlNrWTBTbmhsYjAxWVRVeG9UMU55ZVVFME0wWjZNSFJJVW1oVk5EWkxTVFphTmtvNFpWTkNiMlJHUTI0d05VODNia2xXVEN0V1VUbDNWMkZJTkRWRFRUWklNek5HSzNnNWVqZHNUVFUzVnpKcFpXTkhiMEpHTmtabFJrcDRaUzl1ZFhvemJWWTBabE5zWW5jMWMwUk9jMU56UTBScVZWaHdOVVp1WWpNMWN6QlVkakJvWmpaWGNsQlJTbWM0VDJ4NlRqTnhWMmRRUVdwU2FHc3dTVWxUSzJ0M1QwSTBWMDlVYm5kcFpreHJNVWRXTjNjeVVrZDNTbTFUY1RSdGRXMHdjMkp0ZUZseGFWVjBlVWRuWmtoRFQyVTNZWEJ4YjJKck9HZHhSR2RYTUZWTldVaEhkRFJ0VTNsTGIyOHlZazlOYkhCWFZIRmhRMWxsYTB3MVlrVnpOamwzVFhOdVJHaExjSGhaSzBGM1EyUkJXRXMxYldkdFZGbG1kMk5GWVhCalJYaGpUSEo0YzI5NVlXRmFXa3BEYlRKRlJFMXJRbE53UTBsblkwNTViVXhWYlhOd1lrVnBWVlJ1YlRoVVVGcFhNWEJqUzJkb05YUkpjbTkzV2xsM1IyVkhNRVpRWmxKU1JUSkJRVFJZT0hrMU4xaFdiM0Y2YlZJMFRqSnphSEkyVEdkMVJXcExUbTlMVWl0SGIyMWxlV1pwY1d4M2NFUk5Oa2d6TTJ4dVpuaGhXSFZ3TWxGek5WbDBNRGM1VnpocVFURnNkM0pJVWtkTmEyVkhTR0ZyYjJkRFNUaFhPWE5hUVVob01YVnNURWhhTWtOYVJWaFJWVGQyV1hKdlYwSlpaRVphWWpaU1ltdHZVV1ZQZGtKMFIxY3hRbHByZDA5SFUzbHlaMmxpYUZJMVZEQnFWMHg2YkhOMVIwRlFTRlZ6Y0ZvNVIwSmljQ3MyVEZGaFdWbFJVREJXUVVsak0wRlZOME5QYmk5ek5WQjRaRXBKUTBOdGVrRTBka1ZJVTFKYU5WUkJOVXB2Uldwa2RHRllhRWgzWlVoNWFFUmpNR1ZWZGtGcmVFWnhTMWhEUTJWMFFrNU5XRU5KYlcxWFFqUlRVMFI0YlROallYaEpURWs0WjNkUFExbG5TWGh1YlV4TGVUVXlNRUl4YkRZMlFqVjJVbmhQUlhoQk9HdFpaak5wUW05UU1IWnBlbFY0TWtWeWJIZG1SbEJWZGtremNHNWxPVGsyYTBOclNHZGlTSFExY1N0MU5tMVJURzVYTTFWa2NHOXBSRkUwYkhCUGVFOUllbUZXTUVkMWEwRjZXSEZXTjJOR0wyOXZia0VyTHpoNFpqbEVkRTlLVEd4emQwMXpObVJMT0hSRmREazVkV2x2VEdwTVZtNHZjVkpKYW5sTGJEaG1iR05YWlRGQlIxVllRalJoTjJFeGFqbGhZWEJKTW5weVNIZFRiRGhpUWl0UlpXcFVRMWx3Vm1aMlEwZFJRVUZCUVVKS1VsVTFSWEpyU21kblp6MDlQQzlpWVhKamIyUmxQZzBLSUNBZ0lDQWdQR0psY21WamFIUnBaM1Z1WjNORVlYUmxQakl3TVRNdE1URXRNVE5VTURVNk5UTTZNakVyTURFd01Ed3ZZbVZ5WldOb2RHbG5kVzVuYzBSaGRHVStEUW9nSUNBZ0lDQThaM1ZsYkhScFoydGxhWFJ6UW1WbmFXNXVQakl3TVRNdE1URXRNVE5VTURVNk5UTTZNakFyTURFd01Ed3ZaM1ZsYkhScFoydGxhWFJ6UW1WbmFXNXVQZzBLSUNBZ0lDQWdQR2QxWld4MGFXZHJaV2wwYzBWdVpHVStNakF4TXkweE1TMHhNMVF3TmpvMU16b3lNQ3N3TVRBd1BDOW5kV1ZzZEdsbmEyVnBkSE5GYm1SbFBnMEtJQ0FnSUNBZ1BHWnZjbTFoZEhSbFpGQnlaV2x6UGpJc01qQWdSVlZTUEM5bWIzSnRZWFIwWldSUWNtVnBjejROQ2lBZ0lDQWdJRHgzWVdWb2NuVnVaejR1UEM5M1lXVm9jblZ1Wno0TkNpQWdJQ0FnSUR4cmIyNTBjbTlzYkdWMWNuTkRiMlJsUGtWT01TMHhNQzB4TXpFeE1EVTFNend2YTI5dWRISnZiR3hsZFhKelEyOWtaVDROQ2lBZ0lDQWdJRHhyYjI1MGNtOXNiRzFsWkdsMWJUNVFLaW96TVRJek1USXpPSFk4TDJ0dmJuUnliMnhzYldWa2FYVnRQZzBLSUNBZ0lDQWdQSFJoWjJWelEyOWtaVDVOYjNScGRqd3ZkR0ZuWlhORGIyUmxQZzBLSUNBZ0lDQWdQSFJwWTJ0bGRFbEVQakkzTkRrME5qY3dORFE0TURFeU5Ud3ZkR2xqYTJWMFNVUStEUW9nSUNBZ0lDQThjMmxuYm1GMGRYSmxQaTB0VkVWVFZDMHRWRWxEUzBWVUxTMDhMM05wWjI1aGRIVnlaVDROQ2lBZ0lDQThMMkpsY21WamFIUnBaM1Z1Wno0TkNpQWdQQzlpWlhKbFkyaDBhV2QxYm1kbGJqNE5Dand2ZEdsamEyVjBSWEozWlhKaWMxQnliM3BsYzNOU1pYTndiMjV6WlQ0TkNnMEs=",
                        "price": 
                        {
                            "unit": "Euro",
                            "value": 1.6
                        }
                        
                    }
                }
            }

## Confirm ticket delivery [/imp-endpoint/api/V2/Processes/{processId}?action=confirm]    
The response contains details of a bought ticket, identified by {ticketIds} and {ticketContent} 

The data structure of the request body:

attribute | json data type | comments
--- | --- | ---
requestId | String | Resource id
ticketIds | String | Tickets ids for confirmation
operator | String | Name of Ticket Operator

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
actions | Array | List of available actions on this resource (confirm)
processId | Number | BPMN process id
confirmation | Object | Confirm ticket response data


confirmation contains following fields:

attribute | json data type | comments
--- | --- | ---
featureType | String | Feature type
confirmationId | String | (Dependig on the service to-be-used)
confirmationData | Object | Response of confirm ticket request

confirmationData contains following fields:

attribute | json data type | comments
--- | --- | ---
confirmed | Boolean | Value indicating success/failure
messages | Array | (Depending on the ticket-service to be used.)    
HTTP Headers:
- userToken: Token in the response received to {{host}}/imp-endpoint/api/{{version}}/Partners/User/Process?action=register
- Accept-Language: This header specifies the language of the relevant messages for the ticket. Examples: de, en, fr, it. The supported languages depend on the individual services. Not all information may be translated from the default language of the service.

### Confirming a ticket delivery [PUT]


+ Parameters
    + processId (string, `9347`, required) ... ID of BMPN process in Connect.
    
+ Request (application/json)

    + Headers
        
            userToken: {someUserToken} 

    + Body
    
            {
              "requestId": "{resourceId}",
              "ticketIds": [
                            "274946704480125"
                           ],
               "operator": {
                    "name": "handyticket"        
                }
            }

+ Response 200 (application/json)

    + Body
    
            {
                "process": {
                    "actions": [],
                    "processId": "{processId}",
                    "confirmation": {
                        "featureType": "CONFIRM",
                        "confirmationId": null,
                        "confirmationData": {
                            "confirmed": true,
                            "ticketContent": "iVBORw0KGgoAAAANSUhEUgAAAK8AAACvAQMAAACxXBw2AAAAB3RJTUUH2woPDAQmGYX3JgAAAAlwSFlzAAAK8AAACvABQqw0mAAAAAZQTFRFAAAA////pdmf3QAAAShJREFUeNrtl0EOhCAMRcvKJTeCmw16M7xRl6xgfkGNmllOITPRpEGfCwv/tyCVT1emB/8TToTLEdloC8t90Me+RiaMHGqoY0cmeXZ2BXqRGY1LxJqsnTGE6IarDJi8KH9Xpy+uHkRyEndr6uCttjyTaH8tQCWcTBKzYfp4dZq8Ihbtp1JWPDg7Q/8yDGM9kiRHCDhwT1ATxylPWb6PWPhQXhPXWmMDARxdZeiN4yTJwfZkMOZdBk0smTS9nc10WRMtDJuJ2WB8U2a78ECcWo810mTsvK+JJm6NRfraVQY9XJupr1OXnSSc+7cWboeFuGVyNNMBWLZRuG/bR177BqOPAWF6w92wr+Xt4e95IBYZcFRAclL7XXA7LADDg4ED6+Ov/CA8+NfwG147q3gE6HAPAAAAAElFTkSuQmCC"
                        }
                    }
                }
            }

## Cancelation of ticket [/imp-endpoint/api/V2/Processes/{processId}?action=cancel] 
The data structure of the request body:

attribute | json data type | comments
--- | --- | ---
requestId | String | Resource id
ticketIds | String | Tickets ids for cancelation
operator | String | Name of Ticket Operator

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
processId | Number | BPMN process id
confirmation | Object | Cancel ticket response data


confirmation contains following fields:

attribute | json data type | comments
--- | --- | ---
featureType | String | Feature type
confirmationId | String | (Dependig on the service to-be-used)
confirmationData | Object | Response of cancel ticket request

confirmationData contains following fields:

attribute | json data type | comments
--- | --- | ---
status | Boolean | Value indicating success/failure
data | Array | (Depending on the ticket-service to be used.)    
HTTP Headers:
- userToken: Token in the response received to {{host}}/imp-endpoint/api/{{version}}/Partners/User/Process?action=register
- Accept-Language: This header specifies the language of the relevant messages for the ticket. Examples: de, en, fr, it. The supported languages depend on the individual services. Not all information may be translated from the default language of the service.

### Canceling a ticket [PUT]


+ Parameters
    + processId (string, `192636`, required) ... ID of BMPN process in Connect.
    
+ Request (application/json)

    + Headers
        
            userToken: {someUserToken} 

    + Body
    
            {
              "requestId": "{resourceId}",
              "ticketIds": [
                            "15900040459226"
                           ],
               "operator": {
                    "name": "zpsnova"        
                }
            }
 
+ Response 200 (application/json)

    + Body
    
            {
                "process": {
                    "actions": [],
                    "processId": "192636",
                    "confirmation": {
                        "featureType": "CANCELATION",
                        "confirmationId": null,
                        "confirmationData": {
                            "status": "CANCELED",
                            "data": [
                               "15900040459226 TECHNISCH_ANNULLIERT" 
                        }
                    }
                }
            }

## Refund Ticket Offers [/imp-endpoint/api/V2/Resources/Ticketing/Refunds?action=offer]    
Get a list of available ticket refund offers for specified ticket.

The data structure of the request:

attribute | json data type | comments
--- | --- | ---
deductible | Object | Value unit pair optional object to be set for deducting amount from refund.
refunds | Array of Object | Ticket id and refund reason string. To be specified for refund request with reason being optional.

Based on the ticketing-service to-be-used , certain attributes have been provided and shall be used in the request accordingly.

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
actions | Array | List of available actions on this resource (buy/confirm)
id | Number | Resource id
description | String | 
type | String | 
uri | URI | URI to request more details (where available)
location | Object | Standard GeoJSON with 'Point' geometry type. { "type": "Point", "coordinates": ["longitude":Number, "latitude":Number] }
provider | String | Service provider
operator | String | Name of Ticket Operator
tariffText | String | Contains Zone and Validity information
tariffInformation | String | Conditions applied for ticket
price | Object | Value unit pair of object giving total amount of ticket
deductible | Object | Value unit pair of object which gives deduction details for ticket
minDeductible | Object | Value unit pair of object which gives minimum amount that will be deducted for ticket
maxDeductible | Object | Value unit pair of object which gives maximum amount that will be deducted for ticket

HTTP Headers:
- Accept-Language: This header specifies the language to be used for the attributes obtained in the respone, which is the list of tickets obtained. Examples: de, en, fr, it. The supported languages depend on the individual services. Not all information may be translated from the default language of the service.

### Getting available tickets [POST]

    
+ Request (application/json)

    + Body
    
            { 
                "deductible": { 
                    "value": 10.0, 
                    "unit": "Chf"
                },
                "refunds": [{ 
                    "ticketId": "26304090015304", 
                    "refundReason": "BETR_STOERUNG" 
                }]
            }

+ Response 200 (application/json)

    + Body
    
            {
                [
                    {
                        "actions": [
                            {
                                "name": "refund",
                                "method": "POST",
                                "uri": "Resources/Ticketing/Refunds/{resourceId}/Process?action=refund"
                            }
                        ],
                        "id": {resourceId},
                        "description": null,
                        "type": null,
                        "uri": "Resources/Ticketing/Refunds/157",
                        "location": null,
                        "provider": null,
                        "operator": "zpsnovaRefund",
                        "tariffText": "DVB VVO-Einzelfahrt normal Preisstufe 1 für Zone Dresden gültig 18.11.13 12:21 Uhr bis 13:21 Uhr.",
                        "tariffInformation": "Gilt in der angegebenen Tarifzone; max. 1 Std.",
                        "price": 
                        {
                            "unit": "Chf",
                            "value": -73.0
                        },
                        "deductible": 
                        {
                            "unit": "Chf",
                            "value": 10.0
                        },
                        "minDeductible": 
                        {
                            "unit": "Chf",
                            "value": 5.0
                        },
                        "maxDeductible": 
                        {
                            "unit": "Chf",
                            "value": 15.0
                        }
                    }
                ]
            }

## Refund a Ticket [/imp-endpoint/api/V2/Resources/Ticketing/Refund/{id}/Process?action=refund]    
The response contains details of a ticket that is refunded, identified by {ticketIds} and {ticketContent} 

The data structure of the request body:

attribute | json data type | comments
--- | --- | ---
operator | OperatorCredentials | operator credentails details
userName | String | application user name who wants to refund the ticket

The data structure of OperatorCredentials contains the following attributes:

attribute | json data type | comments
--- | --- | ---
name | String | Name of Ticket Operator (zpsnovaRefund)
userId | String | Traveler Id ( Depends on the ticketing-serivce to be used.)
password | String | Password for refunding ticket ( Depends on the ticketing-serivce to be used.)

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
actions | Array | List of available actions on this resource (confirm)
processId | Number | BPMN process id
confirmation | Object | Refund ticket response data


confirmation contains following fields:

attribute | json data type | comments
--- | --- | ---
requestId | String | Resource id received while initiating the refund process
ticketIds | Array | Array of ticket ids 
ticketContent | Base64Binary | Content of Refund Ticket
price | Object | Amount of refund for ticket with currency and value specified.    
HTTP Headers:
- userToken: Token in the response received to {{host}}/imp-endpoint/api/{{version}}/Partners/User/Process?action=register
- Accept-Language: This header specifies the language of the attribues in the buy request to be sent. Examples: de, en, fr, it. The supported languages depend on the individual services. Not all information may be translated from the default language of the service.

### Refund a ticket [POST]


+ Parameters
    + id (string, `9347`, required) ... Ticket ID of Connect.
    
+ Request (application/json)

    + Headers
        
            userToken: {someUserToken} 

    + Body
    
            {
                "operator": {
                    "name": "zpsnovaRefund"
                },
                "userName": "dmpUser"
            }

+ Response 201 (application/json)

    + Body
    
            {
                "actions": [
                    {
                        "name": "confirm",
                        "method": "PUT",
                        "uri": "Processes/{processId}?action=confirm"
                    }
                ],
                "processId": {processId},
                "confirmation": {
                    "featureType": "REFUND",
                    "confirmationId": null,
                    "confirmationData": {
                        "requestId": "{resourceid}"
                        "ticketIds": [
                            "274946704480125"
                        ],
                        "ticketContent": "UEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaVZWUkdMVGdpUHo0TkNqeDBhV15yWlhSRmNuZGxjbUp6VUhKdmVtVnpjMUpsYzNCdmJuTmxQZzBLSUNBOGNISmxhWE0rTWl3eU1Ed3ZjSEpsYVhNK0RRb2dJRHgzWVdWb2NuVnVaejVGVlZJOEwzZGhaV2h5ZFc1blBnMEtJQ0E4WVdkVVpYaDBQakY0SUVSV1FpQldWazh0UldsdWVtVnNabUZvY25RZ2JtOXliV0ZzSUZCeVpXbHpjM1IxWm1VZ01TQm13N3h5SUZwdmJtVWdSSEpsYzJSbGJpQm53N3hzZEdsbklERXpMakV4TGpFeklEQTFPalV6SUZWb2NpQmlhWE1nTURZNk5UTWdWV2h5TGp3dllXZFVaWGgwUGcwS0lDQThiV1Z6YzJGblpTQjBlWEJsUFNKM1lYSnVhVzVuSWo0OEwyMWxjM05oWjJVK0RRb2dJRHh1ZFhSNlpYSWdMejROQ2lBZ1BHSmxjbVZqYUhScFozVnVaMlZ1UGcwS0lDQWdJRHhpWlhKbFkyaDBhV2QxYm1jK0RRb2dJQ0FnSUNBOGMzUmhkSFZ6UGpBOEwzTjBZWFIxY3o0TkNpQWdJQ0FnSUR4MGVYQStNVHd2ZEhsd1BnMEtJQ0FnSUNBZ1BIQjJQall3TmpBOEwzQjJQZzBLSUNBZ0lDQWdQSEJ5YVcxaFpYSkxkbkErTmpBeE16d3ZjSEpwYldGbGNrdDJjRDROQ2lBZ0lDQWdJRHh6Wld0MWJtUmhaWEpMZG5BK05qQXhNend2YzJWcmRXNWtZV1Z5UzNad1BnMEtJQ0FnSUNBZ1BIQnliMlIxYTNSRGIyUmxQakU4TDNCeWIyUjFhM1JEYjJSbFBnMEtJQ0FnSUNBZ1BHZGxZbWxsZEhOSGRXVnNkR2xuYTJWcGRENHdQQzluWldKcFpYUnpSM1ZsYkhScFoydGxhWFErRFFvZ0lDQWdJQ0E4ZW1WcGRFZDFaV3gwYVdkclpXbDBQakE4TDNwbGFYUkhkV1ZzZEdsbmEyVnBkRDROQ2lBZ0lDQWdJRHh1ZFhSNlpYSlVlWEErTUR3dmJuVjBlbVZ5Vkhsd1BnMEtJQ0FnSUNBZ1BITjBZWEowV205dVpUNHhNRHd2YzNSaGNuUmFiMjVsUGcwS0lDQWdJQ0FnUEd0dmJXWnZjblErTVR3dmEyOXRabTl5ZEQ0TkNpQWdJQ0FnSUR4eGRXRnNhWFJoWlhRK01Ud3ZjWFZoYkdsMFlXVjBQZzBLSUNBZ0lDQWdQR0psYzJOb2NtVnBZblZ1Wno1RVZrSWdWbFpQTFVWcGJucGxiR1poYUhKMElHNXZjbTFoYkNCUWNtVnBjM04wZFdabElERWdac084Y2lCYWIyNWxJRVJ5WlhOa1pXNGdaOE84YkhScFp5QXhNeTR4TVM0eE15QXdOVG8xTXlCVmFISWdZbWx6SURBMk9qVXpJRlZvY2k0OEwySmxjMk5vY21WcFluVnVaejROQ2lBZ0lDQWdJRHgwWVhKcFptbHVabTgrUjJsc2RDQnBiaUJrWlhJZ1lXNW5aV2RsWW1WdVpXNGdWR0Z5YVdaNmIyNWxPeUJ0WVhndUlERWdVM1JrTGp3dmRHRnlhV1pwYm1adlBnMEtJQ0FnSUNBZ1BITnBZMmhsY21obGFYUnpUV1Z5YTIxaGJENUZUakV0TVRBdE1UTXhNVEExTlRNS1VDb3FNekV5TXpFeU16aDJDazF2ZEdsMklEUXhPVFV6TlRNM05qY0tMUzFVUlZOVUxTMVVTVU5MUlZRdExRbzhMM05wWTJobGNtaGxhWFJ6VFdWeWEyMWhiRDROQ2lBZ0lDQWdJRHhpWVhKamIyUmxQbWxXUWs5U2R6QkxSMmR2UVVGQlFVNVRWV2hGVldkQlFVRkpORUZCUVVOUFEwRk5RVUZCUkZGSk9FRTJRVUZCUVVKc1FrMVdSVmd2THk4NFFVRkJRbFozZEU0clFVRkJSVFZGYkVWUlZsSTBNblV5WXpJeU4ycE5RWGhGYkdZdkx6WlhNVkppUXpKU05UbEVjR3NyWTJoQ1ZHSlpTa3haT0hScGFHVm9jVTl6TVRsbVppdDJjamRtYmpJNVpuUTFaSEk1WkRNdk1TdDJZaXQyYmpWNlpsZ3laR051SzNodU4wVmtkSEpKU25nclkyOVdNRzV1ZDA1MlRVODBMMjR2WlVsMEwwRmtaSHA0UlU5TVoyNUJSREozWlhWcVVFZEhZMFV4Y1ZBeU1pdHZNM1EwS3pkbWRUUmxXRVJQVGpBdkwzazBUbnB0ZEhveFlWQnphMVpaVFRoR2VrbGlUbkJzZFZCaVMwMUdkMlZ1VERkMGRYTkxZM2hVYTNReWJGWkljbTFQZHpaT0szVktaMnhQV0U5VWJFZFhjbnB1UWxOeFVXVnpSbnBuV0daSVowMU5PVVJMWlRaeGRUWTRkWFYxY1VRM2MySTNORXg0T1M5UGNTc3ZkVVpHWjI1SVJqTnhaR3RQY21rMk4zUjFkMDlsU1RsV2IyNTNSRkUwWm1GR1YxTkNXVzByV2t0Vk1FWlZiME0yVUVJM0wwOUtaM3BOV2pKbGVua3JjMDkyTkdGWEt6RnJWM2xZZW5OT1JHaHRabmd2YldWVWRtNVJkRXBVU2tsSk5tSkViMDU2YkdsNE0yZFpRMHRHU1djMGNsSlRjVlJ5UWs4eWFrWlBSVXA0TlhOMWVsVmhVbTR6VFVaRlpGSllNRWxTTlVGSmFFMVFiWGd4VUdjM016STJOa1pOVFVsdFJuZGxhMHBsUm5sUFZubEVlRnB1V0hsM1prczRVMFY0ZFhkTlJHaEZha1pEY1RsV04yZGFSbEJzT0UxdVJtUkNiMk50Tmt0bGRVNVBVVkpKZHpSM1kxTnRXRVpNWlV0RWFXTkJSbEZFY0VaVGFUQjZRbXN2YmpBMU9VOUxlREZQWjNoalJEYzRhbk5RY0RSWk1sTkxVM0E0VDBsRmQzQjZaVlo2ZEhWWldWaERTVzVxV25FeGMzUXJUV3MxTWtOV1RsRkZjbUk0WTFScGRHUkdPRk16YWtKRk9XdFRjVXB0TlVjeFIwRmFTR2RsYm14cFVtTjNiRmhwYmpST2NGUXlhM0JuUVhsQ1MxRnZUM1EwWlZsdmNYcEZTRVJsU25sRFNIZFRUREJ6VTBsT1ZFb3lhRXRKWlc1NmVWbFlNakZKTTBwWE4wTmxSMFJvT1c5bVpWVnhObHBWU0ZSNlJGcEljVUY1VVZBeFQzY3ZRMWxZUzFKcGJERjVRMGd5YVhKaWJsZFJlbGR0ZUZkR2R6VnJVMEpEY0djclMxWTBVVGxqYkhWaVQwRkRNbmR0UW5kNVduQmtTMWR1TkVaUGVtbEtjM1JzVG1scmQyRkZWMVZETDJKb1FuZFRTM05XWTNkclFsQTVkRVpETkVWNlEwSnVXbTR2VW5scVkzRXlWWEJDY3k5U1EwVm9ZMDFwY0dOWlNrWTBTbmhsYjAxWVRVeG9UMU55ZVVFME0wWjZNSFJJVW1oVk5EWkxTVFphTmtvNFpWTkNiMlJHUTI0d05VODNia2xXVEN0V1VUbDNWMkZJTkRWRFRUWklNek5HSzNnNWVqZHNUVFUzVnpKcFpXTkhiMEpHTmtabFJrcDRaUzl1ZFhvemJWWTBabE5zWW5jMWMwUk9jMU56UTBScVZWaHdOVVp1WWpNMWN6QlVkakJvWmpaWGNsQlJTbWM0VDJ4NlRqTnhWMmRRUVdwU2FHc3dTVWxUSzJ0M1QwSTBWMDlVYm5kcFpreHJNVWRXTjNjeVVrZDNTbTFUY1RSdGRXMHdjMkp0ZUZseGFWVjBlVWRuWmtoRFQyVTNZWEJ4YjJKck9HZHhSR2RYTUZWTldVaEhkRFJ0VTNsTGIyOHlZazlOYkhCWFZIRmhRMWxsYTB3MVlrVnpOamwzVFhOdVJHaExjSGhaSzBGM1EyUkJXRXMxYldkdFZGbG1kMk5GWVhCalJYaGpUSEo0YzI5NVlXRmFXa3BEYlRKRlJFMXJRbE53UTBsblkwNTViVXhWYlhOd1lrVnBWVlJ1YlRoVVVGcFhNWEJqUzJkb05YUkpjbTkzV2xsM1IyVkhNRVpRWmxKU1JUSkJRVFJZT0hrMU4xaFdiM0Y2YlZJMFRqSnphSEkyVEdkMVJXcExUbTlMVWl0SGIyMWxlV1pwY1d4M2NFUk5Oa2d6TTJ4dVpuaGhXSFZ3TWxGek5WbDBNRGM1VnpocVFURnNkM0pJVWtkTmEyVkhTR0ZyYjJkRFNUaFhPWE5hUVVob01YVnNURWhhTWtOYVJWaFJWVGQyV1hKdlYwSlpaRVphWWpaU1ltdHZVV1ZQZGtKMFIxY3hRbHByZDA5SFUzbHlaMmxpYUZJMVZEQnFWMHg2YkhOMVIwRlFTRlZ6Y0ZvNVIwSmljQ3MyVEZGaFdWbFJVREJXUVVsak0wRlZOME5QYmk5ek5WQjRaRXBKUTBOdGVrRTBka1ZJVTFKYU5WUkJOVXB2Uldwa2RHRllhRWgzWlVoNWFFUmpNR1ZWZGtGcmVFWnhTMWhEUTJWMFFrNU5XRU5KYlcxWFFqUlRVMFI0YlROallYaEpURWs0WjNkUFExbG5TWGh1YlV4TGVUVXlNRUl4YkRZMlFqVjJVbmhQUlhoQk9HdFpaak5wUW05UU1IWnBlbFY0TWtWeWJIZG1SbEJWZGtremNHNWxPVGsyYTBOclNHZGlTSFExY1N0MU5tMVJURzVYTTFWa2NHOXBSRkUwYkhCUGVFOUllbUZXTUVkMWEwRjZXSEZXTjJOR0wyOXZia0VyTHpoNFpqbEVkRTlLVEd4emQwMXpObVJMT0hSRmREazVkV2x2VEdwTVZtNHZjVkpKYW5sTGJEaG1iR05YWlRGQlIxVllRalJoTjJFeGFqbGhZWEJKTW5weVNIZFRiRGhpUWl0UlpXcFVRMWx3Vm1aMlEwZFJRVUZCUVVKS1VsVTFSWEpyU21kblp6MDlQQzlpWVhKamIyUmxQZzBLSUNBZ0lDQWdQR0psY21WamFIUnBaM1Z1WjNORVlYUmxQakl3TVRNdE1URXRNVE5VTURVNk5UTTZNakVyTURFd01Ed3ZZbVZ5WldOb2RHbG5kVzVuYzBSaGRHVStEUW9nSUNBZ0lDQThaM1ZsYkhScFoydGxhWFJ6UW1WbmFXNXVQakl3TVRNdE1URXRNVE5VTURVNk5UTTZNakFyTURFd01Ed3ZaM1ZsYkhScFoydGxhWFJ6UW1WbmFXNXVQZzBLSUNBZ0lDQWdQR2QxWld4MGFXZHJaV2wwYzBWdVpHVStNakF4TXkweE1TMHhNMVF3TmpvMU16b3lNQ3N3TVRBd1BDOW5kV1ZzZEdsbmEyVnBkSE5GYm1SbFBnMEtJQ0FnSUNBZ1BHWnZjbTFoZEhSbFpGQnlaV2x6UGpJc01qQWdSVlZTUEM5bWIzSnRZWFIwWldSUWNtVnBjejROQ2lBZ0lDQWdJRHgzWVdWb2NuVnVaejR1UEM5M1lXVm9jblZ1Wno0TkNpQWdJQ0FnSUR4cmIyNTBjbTlzYkdWMWNuTkRiMlJsUGtWT01TMHhNQzB4TXpFeE1EVTFNend2YTI5dWRISnZiR3hsZFhKelEyOWtaVDROQ2lBZ0lDQWdJRHhyYjI1MGNtOXNiRzFsWkdsMWJUNVFLaW96TVRJek1USXpPSFk4TDJ0dmJuUnliMnhzYldWa2FYVnRQZzBLSUNBZ0lDQWdQSFJoWjJWelEyOWtaVDVOYjNScGRqd3ZkR0ZuWlhORGIyUmxQZzBLSUNBZ0lDQWdQSFJwWTJ0bGRFbEVQakkzTkRrME5qY3dORFE0TURFeU5Ud3ZkR2xqYTJWMFNVUStEUW9nSUNBZ0lDQThjMmxuYm1GMGRYSmxQaTB0VkVWVFZDMHRWRWxEUzBWVUxTMDhMM05wWjI1aGRIVnlaVDROQ2lBZ0lDQThMMkpsY21WamFIUnBaM1Z1Wno0TkNpQWdQQzlpWlhKbFkyaDBhV2QxYm1kbGJqNE5Dand2ZEdsamEyVjBSWEozWlhKaWMxQnliM3BsYzNOU1pYTndiMjV6WlQ0TkNnMEs=",
                        "price": 
                        {
                            "unit": "Euro",
                            "value": -73.0
                        }
                        
                    }
                }
            }

# Group Car Sharing

## Stations and Floating Cars [/imp-endpoint/api/V2/Resources/CarSharing/All{?lat}{?lng}{?radius}{?f_cars}] 

+ Attributes 
    + metaData(array)
        + (Car Sharing Floating Meta Data)
        + (Car Sharing Station Meta Data)
    + resources (array[Car Sharing Base])

### Get Stations and Floating Cars [GET]
Get a list of all car sharing stations and floating cars contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `100`) ... Radius of bounding circle in meter.
    + f_cars (optional, array, `[{"provider":"driveNow"}]`) ... Filter to retrieve cars of a specific `fuelType`, `provider`, or `operator`.

+ Response 200 (application/json)
    + Attributes (Stations and Floating Cars)

## Car Stations [/imp-endpoint/api/V2/Resources/CarSharing/Stations{?lat}{?lng}{?radius}{?f_cars}]

+ Attributes 
    + metaData(array[Car Sharing Station Meta Data])
    + resources (array[Car Sharing Station])

### Get Car Stations [GET] 
Get a list of all car sharing stations contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `100`) ... Radius of bounding circle in meter.
    + f_cars (optional, array, `[{"provider":"flinkster"}]`) ... Filter to retrieve cars of a specific `fuelType`, `provider`, or `operator`.
    
+ Response 200 (application/json)
    + Attributes (Car Stations)

## Car Station with Details [/imp-endpoint/api/V2/Resources/CarSharing/Stations/{id}]

+ Attributes (Car Sharing Station)
    + type: CarSharingStationDetails (string, required)
    + notes: `Der Stellplatz befindet sich im öffentlichen Straßenland gleich am Ausgang der U-Bahn 2,  gegenüber Kollwitzstr. 4, und ist als Carsharingstellplatz gekennzeichnet.`(string)
    + services (nullable)
    + availableCars: 1 (number)

### Get Car Station with Details [GET] 
Get details of a specific car sharing station. 

+ Parameters
    + id (string, `4516`, required) ... Station ID of Connect. Can be retrieved through "Get Car Stations".
        
+ Response 200 (application/json)
    + Attributes (Car Station with Details)

## Cars at a Station [/imp-endpoint/api/V2/Resources/CarSharing/Stations/{id}/Cars]

+ Attributes
    + metaData(array[Car Sharing Station Meta Data])
    + resources (array)
        + (object)
            + actions (array)- To initiate transactional steps like booking, reservation, and cancellation
                + (object)
                    + name: `book` (string)
                    + method: `POST` (string)
                    + uri: `Resources/CarSharing/Stations/4516/Cars/1131139/Process?action=book` (string)
            + id: 33188 (number, required) - ID of Connect
            + description: `F-R 8743` (string) - Usually the license ID, approximate location, or name of car
            + type: CarSharingStationCar (string, required)
            + uri: `Resources/CarSharing/Stations/1080/Cars/33188` (string) - URI to request details
            + location (GeoJsonPoint, required)
            + provider: flinkster (string) - Alias of service provider
            + availability: 100 (number) - Current availability in percentage. "=0" or "=100" in case of floating car
            + externalId: `402673` (string) - Identification number of service provider
            + operator: `FlinksterDB` (string) - Company operating the car fleet. Commonly same as provider
            + model: `Citroën DS3 1,6 Diesel 68kW NAVI`(string) 
            + address (Address)
            + licenseId: `F-R 8743`(string) - License plate number
            + category (string, nullable)
            + fuelType: DIESEL(enum)
                + PETROL
                + ELECTRICITY
                + LPG
                + HYDROGEN
                + HYBRID
                + UNKNOWN
            + fuelLevel (string, nullable)
            + imageLink: `www.flinkster.de/common/gethashdata.php?uniquebid=73406c9a68b4cc8286e53d12e326e1ab`(string)

### Get Cars at a Station [GET]
Get a list of cars at a specific station.

+ Parameters
    + id (string, `4516`, required) ... Station ID of Connect. Can be retrieved through "Get Car Stations".
    
+ Response 200 (application/json)
    + Attributes (Cars at a Station)

## Cars at a Station available in future [/imp-endpoint/api/V2/Resources/CarSharing/Stations/{id}/Cars{?from}{?to}]

+ Attributes (Cars at a Station)

### Get Cars at a Station available in future [GET]
Get a list of available cars in future at a specific car sharing station.

+ Parameters
    + id (string, `4516`, required) ... Station ID of Connect. Can be retrieved through "Get Car Stations".
    + from (string, `2015-04-14T13:00:00%2B02:00`) ... From date 
    + to (string, `2015-04-19T16:00:00%2B02:00`) ... To date

+ Response 200 (application/json)
    + Attributes (Cars at a Station available in future)

## Book any Car at a Station [/imp-endpoint/api/V2/Resources/CarSharing/Stations/{id}/Process?action=book]

+ Attributes
    + confirmationId: 1012020020 (string)
    + comments: Comments (string)

### Book any Car at a Station [POST]
Book any available car at a specifc station.

+ Parameters
    + id (string, `1`, required) ... Station ID of Connect. Can be retrieved through "Get Car Stations".

+ Attributes
    + operator: flinkster (string, required) - Name of the operator
    + userId: `4711/10` (string, required)- ID of user
    + from: `2002-20-10T22:00:33+02:00` (string, optional) - start time of booking as dateTime
        + Default: current server time
    + to: `2002-20-10T22:00:53+02:00` (string, optional) - end time of booking as dateTime

+ Request (application/json)

+ Response 201 (application/json)
    + Attributes (Book any Car at a Station)

## Book a Car at a Station [/imp-endpoint/api/V2/Resources/CarSharing/Stations/{stationId}/Cars/{carId}/Process?action=book]

+ Attributes (Book any Car at a Station)

### Book a Car at a Station [POST]
Book a specific car at a specifc station.

+ Parameters
    + stationId (string, `1`, required) ... Station ID of Connect. Can be retrieved through "Get Car Stations".
    + carId (string, `2`, required) ... Car ID of Connect. Can be retrieved through "Get Cars at a Station".

+ Attributes
    + operator: flinkster (string, required) - Name of the operator
    + userId: `4711/10` (string, required)- ID of user
    + from: `2002-20-10T22:00:33+02:00` (string, optional) - start time of booking as dateTime
        + Default: current server time
    + to: `2002-20-10T22:00:53+02:00` (string, optional) - end time of booking as dateTime

+ Request (application/json)

+ Response 201 (application/json)
    + Attributes (Book a Car at a Station)

## Floating Cars [/imp-endpoint/api/V2/Resources/CarSharing/Cars{?lat}{?lng}{?radius}{?f_cars}] 

+ Attributes 
    + metaData(array[Car Sharing Floating Meta Data])
    + resources (array[Car Sharing Car])

### Get Floating Cars [GET] 
Get a list of all available floating cars contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `100`) ... Radius of bounding circle in meter.
    + f_cars (optional, array, `[{"provider":"driveNow"}]`) ... Filter to retrieve cars of a specific `fuelType`, `provider`, or `operator`.

+ Response 200 (application/json)
    + Attributes (Floating Cars)

## Floating Car with Details [/imp-endpoint/api/V2/Resources/CarSharing/Cars/{id}]

+ Attributes (Car Sharing Car)
    + type: CarSharingCarDetails
    + name: Richard (string, nullable) - Car name. Commonly same as `model`
    + power (string, nullable)
    + seatCount: 4 (number, nullable) - Number of seats
    + doorCount (number, nullable) - Number of doors
    + colour (string, nullable) - Car colour
    + properties (array, optional)
        + (enum)
            + Airbags
            + ABS
            + AllSeasonTires
            + ServoSteering
            + AirConditioningSystem
            + Automatic
            + FogLight
            + Radio_CD
            + NavigationSystem
            + FineParticlesBadge_green
            + AUX
            + WinterTires
            + ParticulateFilter
            + SeatHeating
            + ChildSafetySeatAnchorage  
            + Sample
                + Automatic
    + locationNote (string, nullable)
    + operatorURI (string, nullable) - Operator URI
    + tariffs (array)
        + (object)
            + amount (object)
                + unit (Unit)
                    + Sample
                        + Eurocent
                + value: 31 (number)
            + basis (object)
                + unit (Unit)
                    + Sample
                        + minute
                + value: 1 (number)

### Get Floating Car with Details [GET] 
Get details of a specific floating car. 

+ Parameters
    + id (string, `365659`, required) ... Car ID of Connect. Can be retrieved through "Get Floating Cars".

+ Response 200 (application/json)
    + Attributes (Floating Car with Details)

## Book a Floating Car [/imp-endpoint/api/V2/Resources/CarSharing/Cars/{id}/Process?action=book]

+ Attributes
    + actions (array)- To cancel the booking
        + (object)
            + name: `cancel` (string)
            + method: `PUT` (string)
            + uri: `Processes/967620?action=cancel` (string)
    + processId: 967620
    + confirmation
        + featureType: BOOKING
        + confirmationId    : `res_24009`
        + confirmationData
            + resource
                + type: CarSharingCarDetails
                + location (GeoJsonPoint, required)
                + licenseId: `M-DX5721`
            + interval
                + from: `2015-06-24T17:05:24+05:30`
                + to: `2015-06-24T17:20:24+05:30`

### Book a Floating Car [POST]
Book a specific floating car.

+ Parameters
    + id (string, `2`, required) ... Car ID of Connect. Can be retrieved through "Get Floating Cars".

+ Attributes
    + operator: `drivenow` (string, required)
    + from (string, optional) - start time of booking as dateTime
        + Default: `current server time`
    + to (string, optional) - end time of booking as dateTime
    + userId: `4711/10` (string, required)

+ Request (application/json)

+ Response 201 (application/json)
    + Attributes (Book a Floating Car)

# Group Bike Sharing
Connect differentiates two types of services: station-based and floating bike sharing. In some cities, station-based services allow bikes to be returned freely within the inner city (e.g. KVBRad). In this special case, a resource of type station may, in fact, be an indvidual bike. 

## Stations and Floating Bikes [/imp-endpoint/api/V2/Resources/BikeSharing/All{?lat}{?lng}{?radius}] 
<a name="BikeSharing_StationsAndFloatingBikes" />

+ Attributes 
    + metaData(array[Bike Sharing Meta Data])
    + resources (array[Bike Sharing Base])

### Get Stations and Floating Bikes [GET]
Get a list of all bike sharing stations and floating bikes contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

The (optional) If-Modified-Since can be set to a specific date-time in order to request only resources modified after a particular date-time.
Date-time is in HTTP date format for, e.g. Wed, 09 Apr 2008 23:55:38 GMT.

+ Request (application/json)
    + Headers
  
            Authorization: Basic

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `1000`) ... Radius of bounding circle in meter.

+ Response 200 (application/json)
    + Attributes (Stations and Floating Bikes)

+ Response 500 (application/json)
    + Attributes (object)
        + errorCode (string)
        + errorMessage (string)
        + type: SYSTEM
        + source: IMP_ENDPOINT

## Bike Stations [/imp-endpoint/api/V2/Resources/BikeSharing/Stations{?lat}{?lng}{?radius}{?filter}] 

+ Attributes 
    + metaData(array[Bike Sharing Meta Data])
    + resources (array)
        + (Bike Station with Details)
            + type: BikeSharingStation (string, required)

### Get Bike Stations [GET]
Get a list of all bike sharing stations contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `500`) ... Radius of bounding circle in meter.
    + filter (optional, string, `Berlin`) ... Free text filter. Multiple strings are combined by OR.

+ Response 200 (application/json)
    + Attributes (Bike Stations)

## Bike Station with Details [/imp-endpoint/api/V2/Resources/BikeSharing/Stations/{id}]

+ Attributes (Bike Sharing Base)
    + type: BikeSharingStationDetails (string, required)
    + phoneNo (string, nullable)
    + operatorURI (string, nullable)
    + operatorName: `nextbike Berlin` (string)
    + address (Address)
    + openingHours (string, nullable)
    + numberOfBikes (number, nullable) - Number of racks
    + numberOfFreeBikes: 1 (number) - Number of available bikes, can exceed number of racks
    + services (enum)
        - MountainBike
        - ElectroBike
        - CityBike
        - ChildrenBike    
        - Sample
            + CityBike

### Get Bike Station with Details [GET] 
Get details of a specific bike sharing station.

+ Parameters
    + id (string, `3177225`, required) ... Station ID of Connect. Can be retrieved through "Bike Stations".
    
+ Response 200 (application/json)
    + Attributes (Bike Station with Details)

## Bikes at a Station [/imp-endpoint/api/V2/Resources/BikeSharing/Stations/{id}/Bikes]

+ Attributes 
    + metaData(array[Bike Sharing Meta Data])
    + resources (array)
        + (Bike with Details at a Station)
            + type: BikeSharingStationBike (string, required)

### Get Bikes at a Station [GET] 
Get a list of bikes at a specific station.

+ Parameters
    + id (string, `3177225`, required) ... Station ID of Connect. Can be retrieved through "Bike Stations".
    
+ Response 200 (application/json)

    + Attributes (Bikes at a Station)
    
## Bike with Details at a Station [/imp-endpoint/api/V2/Resources/BikeSharing/Stations/{stationId}/Bikes/{bikeId}]

+ Attributes
    + actions (array)- To initiate transactional steps like booking, reservation, and cancellation
        + (object)
            + name: `book` (string)
            + method: `POST` (string)
            + uri: `Resources/BikeSharing/Stations/3177225/Bikes/101408/Process?action=book` (string)
    + id: 101408 (number, required) - ID of Connect
    + description (string, nullable)
    + type: BikeSharingStationBikeDetails (string, required)
    + uri: `Resources/BikeSharing/Stations/3177225/Bikes/101408` (string) - URI to request details
    + location (GeoJsonPoint, required)
    + provider: nextbike (string) - Alias of service provider
    + availability: 100 (number) - Current availability in percentage. "=0" or "=100" in case of floating bike
    + externalId: 3165145 (string) - Identification number of service provider
    + operator: `nextbike Berlin` (string) - Company operating the bike fleet. Commonly same as provider
    + unitId: 254723 (number)

### Get Bike with Details at a Station [GET] 
Get details of a specific bike at a specific station.

+ Parameters
    + stationId (string, `3177225`, required) ... Station ID of Connect. Can be retrieved through "Bike Stations".
    + bikeId (string, `101408`, required) ... Bike ID of Connect. Can be retrieved through "Getting bikes for a specific station".
        
+ Response 200 (application/json)

    + Attributes (Bike with Details at a Station)

## Book any Bike at a Station [/imp-endpoint/api/V2/Resources/BikeSharing/Stations/{id}/Process?action=book]

+ Attributes
    + actions (array)
        + (object)
            + name: `cancel` (string)
            + method: `PUT` (string)
            + uri: `Processes/82?action=cancel` (string)
    + processId: 82
    + confirmation
        + featureType: BOOKING
        + confirmationId: Reservation
        + confirmationData: 6678


### Book any Bike at a Station [POST]
Book any available bike at a specific station.

+ Parameters
    + id (string, `2`, required) ... Station ID of Connect where the bike is to be booked. Can be retrieved through "Bike Stations".

+ Attributes
    + operator (object, required)
        + name: callabike (string, required) - Name of the operator
        + userId: `3349` (string, required)
        + password: `41b40ce13a2eb2901fe0e31a528bbd62` (string, required) - Login key
    + userId: `callabike_user` (string, required)
    + from: `2002-20-10T22:00:33+02:00` (string, optional) - start time of booking as dateTime
    + to: `2002-20-10T22:00:53+02:00` (string, optional) - end time of booking as dateTime

+ Request (application/json)

+ Response 201 (application/json)
    + Attributes (Book any Bike at a Station)

## Book a Bike at a Station [/imp-endpoint/api/V2/Resources/BikeSharing/Stations/{stationId}/Bikes/{bikeId}/Process?action=book]

+ Attributes (Book any Bike at a Station)

### Book a Bike at a Station [POST]
Book a specific bike at a specific station.

+ Parameters
    + stationId (string, `2`, required) ... Station ID of Connect where the bike is to be booked. Can be retrieved through "Bike Stations".
    + bikeId (string, `1`, required) ... Bike ID of Connect of bike to be booked. Can be retrieved through "Getting bikes for a specific station".

+ Attributes
    + operator (object, required)
        + name: callabike (string, required) - Name of the operator
        + userId: `3349` (string, required)
        + password: `41b40ce13a2eb2901fe0e31a528bbd62` (string, required) - Login key
    + userId: `callabike_user` (string, required)
    + from: `2002-20-10T22:00:33+02:00` (string, optional) - start time of booking as dateTime
    + to: `2002-20-10T22:00:53+02:00` (string, optional) - end time of booking as dateTime

+ Request (application/json)

+ Response 201 (application/json)
    + Attributes (Book a Bike at a Station)

## Rent a Bike at Station [/imp-endpoint/api/V2/Resources/BikeSharing/Stations/{stationId}/Bikes/{bikeId}/Process?action=rent]

+ Attributes
    + actions (array)
        + (object)
            + name: `return` (string)
            + method: `PUT` (string)
            + uri: `Processes/88?action=return` (string)
    + processId: 88
    + confirmation
        + featureType: RENT (string)
        + confirmationId: 7133
        + confirmationData 
            + rentalId: 7133 (string)
            + subResourceId: 29498 (string)
            + lockCode: 9968 (string)
            + resourceId: 29496 (string)
            + startTime: `2015-05-12T13:38:36+02:00` (string)

### Rent a Bike at Station [POST]
Rent a specific bike at a specific station.

+ Parameters
    + stationId (string, `2`, required) ... Station ID of Connect where the bike is to be booked. Can be retrieved through "Bike Stations".
    + bikeId (string, `1`, required) ... Bike ID of Connect of bike to be booked. Can be retrieved through "Getting bikes for a specific station".

+ Attributes
    + operator (object, required)
        + name: nextbikeCologne (string, required) - Name of the operator
        + userId: `1234` (string, required)
        + password: `ABChL0nHxtGvful4` (string, required) - Login key

+ Request (application/json)

+ Response 201 (application/json)
    + Attributes (Rent a Bike at Station)

## Floating Bikes [/imp-endpoint/api/V2/Resources/BikeSharing/Bikes{?lat}{?lng}{?radius}]    
The response attributes are the same as [Stations and Floating Bikes](#BikeSharing_StationsAndFloatingBikes).

### Get Floating Bikes [GET]
Get a list of all floating bikes contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `1000`) ... Radius of bounding circle in meter.
    
+ Response 200 (application/json)

    + Body
    
            {
                "metaData": [
                    {
                        "serviceAlias": "callabike",
                        "webUiUrl": "https://www.callabike-interaktiv.de/kundenbuchung/process.php?proc=bikesuche",
                        "lastUpdateTime": "2014-09-08T13:44:09+05:30",
                        "messages": []
                    },
                    {
                        "serviceAlias": "nextbike",
                        "webUiUrl": "http://www.nextbike.de/de/standorte/",
                        "lastUpdateTime": "2014-09-08T13:40:38+05:30",
                        "messages": []
                    }
                ],
                "resources": []
            }

## Floating Bike with Details [/imp-endpoint/api/V2/Resources/BikeSharing/Bikes/{id}]
The response attributes are the same as [Stations and Floating Bikes](#BikeSharing_StationsAndFloatingBikes).

### Get Floating Bike with Details [GET] 
Get details of a specific floating bike.

+ Parameters
    + id (string, `18644`, required) ... Bike ID of Connect. Can be retrieved through "Get Floating Bikes".

+ Response 200 (application/json)
    
    + Body

            {
                "actions": [
                    {
                        "name": "book",
                        "method": "POST",
                        "uri": "Resources/BikeSharing/Bikes/18644/Process?action=book"
                    }
                ],
                "id": 18644,
                "description": "S+U-Bhf. Friedrichstraße",
                "type": "BikeSharingBikeDetails",
                "uri": "Resources/BikeSharing/Bikes/18644/",
                "location": {
                    "type": "Point",
                    "coordinates": [
                        13.385995864868164,
                        52.519676208496094
                    ]
                },
                "provider": "callabike",
                "availability": 100,
                "operator": "CallABike",
                "unitId": "9423"
            }

## Book a Floating Bike [/imp-endpoint/api/V2/Resources/BikeSharing/Bikes/{id}/Process?action=book]

+ Attributes (Book any Bike at a Station)

### Book a Floating Bike [POST]
Book a specific floating bike.

+ Parameters
    + id (string, `1`, required) ... Bike ID of Connect. Can be retrieved through "Get Floating Bikes".

+ Attributes
    + operator (object, required)
        + name: callabike (string, required) - Name of the operator
        + userId: `3349` (string, required)
        + password: `41b40ce13a2eb2901fe0e31a528bbd62` (string, required) - Login key
    + userId: `callabike_user` (string, required)
    + from: `2002-20-10T22:00:33+02:00` (string, optional) - start time of booking as dateTime
    + to: `2002-20-10T22:00:53+02:00` (string, optional) - end time of booking as dateTime

+ Request (application/json)

+ Response 201 (application/json)
    + Attributes (Book a Floating Bike)

## Return a Bike [/imp-endpoint/api/V2/Processes/{processId}?action=return]    

+ Attributes
    + process 
        + actions (array)
        + processId: 88
        + confirmation
            + featureType: RETURN (string)
            + confirmationId: 7133
            + confirmationData 
                + rentalId: 7133 (string)
                + subResourceId: 29498 (string)
                + lockCode: 9968 (string)
                + resourceId: 29496 (string)
                + startTime: `2015-05-12T13:38:36+02:00` (string)
                + endTime: `2015-05-12T13:56:06+02:00`(string)
                + endPlaceId: 31
                + rentCharge: 700
                + serviceCharge: 400
                + currency: Eurocent

### Return a Bike [PUT]
Return a bike and end rental process. If returning is not possible, the response body explains why.

+ Parameters
    + processId (string, `9347`, required) ... ID of BPMN process in Connect.

+ Attributes
    + operator (object, required)
        + name: nextbikeCologne (string, required) - Name of the operator
        + userId: `1234` (string, required)
        + password: `ABChL0nHxtGvful4` (string, required) - Login key
    + location (GeoJsonPoint, required) - Drop-off point
    
+ Request (application/json)

    + Headers
  
            userToken: {someUserToken} 

+ Response 200 (application/json)
    + Attributes (Return a Bike)

# Group Taxi

## List of available Taxis with Basic Info [/imp-endpoint/api/V2/Resources/TaxiService/Taxis{?lat}{?lng}] 
Get a list of taxis in an area of interest a with basic information and a URI to get more details.

parameter | type | comments | required | default | supported by all integrated services
--- | --- | --- | --- | --- | ---
lat, lng, (radius) | Number | Bounding circle to define search area | no | no | no
left_lower_lat, left_lower_lat, right_upper_lat, right_upper_lng | Number | Bounding box to define search area | no | no | no

response attribute | json data type | comments  | supported by all integrated services
--- | --- | --- | ---
metadata | Object | List of integrated services. See section "Metadata" | 
--- | --- | --- | ---
resources | Array | Array of taxis | yes
--- | --- | --- | ---
id | Number | Internal taxi identification number | yes
description | String | Approximate location or car model | no
type | String | (="TaxiServiceTaxi") | yes
uri | URI | URI to request more details (where available) | no
location | Object | GeoJson object of type `Point` in longitude, latitude order | yes
provider | String | Service provider  | yes
availability | Double |  Currently available: "=100". Currently unavailable: "=0"  | yes
externalId | Number | Taxi identification number of service provider | no
operator | String | Taxi dispatcher or taxi company | yes
status | | to be clarified | no
licenceId | String | License plate number | no
properties | |  | no
timetoArrive | number, string | Estimated time to arrive | no

### Get taxi locations [GET]

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of center point.
    + lng (optional, number, `13.39`) ... Longitude of center point.

+ Response 200 (application/json)

    + Body
    
            {
                "metaData": [
                    {
                      "serviceAlias": "vmzTaxi",
                      "webUiUrl": "http://www.vmzberlin.com/",
                      "lastUpdateTime": null,
                      "messages": []
                    }
                ],
                  "resources": [
                    {
                      "actions": [],
                      "id": 1488703,
                      "description": "VW Touran",
                      "type": "TaxiServiceTaxi",
                      "uri": null,
                      "location": {
                        "coordinates": [
                          13.3921508789,
                          52.5235514323
                        ],
                        "type": "Point"
                      },
                      "provider": "vmzTaxi",
                      "availability": 100,
                      "externalId": "b512cafe-3cdd-4f16-a34c-1f569ae92b80@TaxiService",
                      "operator": "TZB",
                      "status": null,
                      "licenceId": null,
                      "properties": null,
                      "timeToArrive": {
                        "value": 2,
                        "unit": "minute"
                      },
                      "payments": null
                    }
                ]
            }

## List of available Taxi Ranks with Basic Info [/imp-endpoint/api/V2/Resources/TaxiService/Ranks{?lat}{?lng}{?radius}] 
Get a list of taxi ranks contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

### Get taxi ranks in a specified area [GET]

attribute | json data type | comments
--- | --- | ---
metadata | Object | List of integrated services. See section "Metadata"
--- | --- | ---
resources | Array | Array of taxi ranks
--- | --- | ---
id | Number | Internal taxi rank identification number
description | String | Approximate location
type | String | Type of taxi rank
uri | URI | URI to request more details (where available)
location | Object | Standard GeoJSON with 'Point' geometry type. { "type": "Point", "coordinates": ["longitude":Number, "latitude":Number] }
provider | String | Service provider 
availability | Double | Availability in percentage
operator | String | Resource operator 
size | Enum | Size of car 

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `1000`) ... Radius of bounding circle in meter.
    
+ Response 200 (application/json)

    + Body
    
            {
                "metaData": [
                    {
                      "serviceAlias": "osmBerlinTaxi",
                      "webUiUrl": "http://www.overpass-api.de/api/interpreter",
                      "lastUpdateTime": null,
                      "messages": []
                    }
                ],
                 "resources": [
                    {
                         "actions": [],
                         "id": 461,
                         "description": null,
                         "type": "TaxiServiceRank",
                         "uri": "Resources/TaxiService/Ranks/461",
                         "location": {
                         "coordinates": [
                            13.6996987,
                            52.5209164
                        ],
                         "type": "Point"
                    },
                     "provider": "osmBerlinTaxi",
                     "availability": null,
                     "operator": null
                    }
                ]
            }

## Fare for the trip specified by origin and distance [/imp-endpoint/api/V2/Info/TaxiService/Fares{?origin_lat}&{?origin_lng}{?radius}] 
This response contains an estimated fare for trips from origin with distance.

### Get fare information for the trip specified by origin and distance [GET]

attribute | json data type | comments
--- | --- | ---
fareQuality | Double | Degree of quality
startTime | String | Date and time of start
arrivalTime | String | Date and time of arrival
totalTime | Object | Journey time and unit
totalDistance | Object | Distance and unit
costs | Object | Contains total costs, flag fall and distance costs as well as surcharges for additional passengers
services | Object | Set of available services

+ Parameters
    + origin_lat (number, `52.4827`) ... Latitude of origin.
    + origin_lng (number, `13.3154`) ... Longitude of origin.
    + radius (number, `2000`) ... Distance in meter.

+ Response 200 (application/json)

    + Body
        
            {
                "fareQuality": 1.0,
                "startTime": "2013-07-09T08:09:17",
                "arrivalTime": "2013-07-09T08:20:17",
                "totalTime":   { "value": 660, "unit": "sec"},
                "totalDistance": { "value": 5000, "unit": "meter" },
                "costs": { 
                    "flagFall": { "value":300, "currency":"EuroCent"},
                    "total":    { "value":960, "currency":"EuroCent"}, 
                    "distance": { "value":660, "currency":"EuroCent"}, 
                    "other":    { },
                    "passengers": [
                       { "value":0,   "currency":"EuroCent" },
                       { "value":0,   "currency":"EuroCent" },
                       { "value":0,   "currency":"EuroCent" },
                       { "value":0,   "currency":"EuroCent" },
                       { "value":150, "currency":"EuroCent" },
                       { "value":300, "currency":"EuroCent" },
                       { "value":450, "currency":"EuroCent" },
                       { "value":600, "currency":"EuroCent" }
                    ]
                }
                "services": {
                    "bookingAvailable": true,
                    "paymentAvailable": false,
                    "privateHireVehicleAvailable": true,
                    "taxiSharing": false,
                    "information": "An diesem Flughafen ist keine Taxibuchung möglich, bitte nutzen Sie eines der Flughafen Taxis" 
                }      
            }

## Fare for the trip specified by origin and destination [/imp-endpoint/api/V2/Info/TaxiService/Fares{?origin_lat}{?origin_lng}{?dest_lat}{?dest_lng}] 
This response contains estimated fare for trips from origin to destination.

### Get fare information for the trip specified by origin and destination [GET]


+ Parameters
    + origin_lat (number, `52.4827`) ... Latitude of origin.
    + origin_lng (number, `13.3154`) ... Longitude of origin.
    + dest_lat (number, `53.5791`) ... Latitude of destination.
    + dest_lng (number, `13.4060`) ... Longitude of destination.

+ Response 200 (application/json)

    + Body
    
            {
                "fareQuality": 1.0,
                "startTime": "2013-07-09T08:09:17",
                "arrivalTime": "2013-07-09T08:20:17",
                "totalTime":   { "value": 660, "unit": "sec"},
                "totalDistance": { "value": 5000, "unit": "meter" },
                "costs": { 
                    "flagFall": { "value":300, "currency":"EuroCent"},
                    "total":    { "value":960, "currency":"EuroCent"}, 
                    "distance": { "value":660, "currency":"EuroCent"}, 
                    "other":    { },
                    "passengers": [
                       { "value":0,   "currency":"EuroCent" },
                       { "value":0,   "currency":"EuroCent" },
                       { "value":0,   "currency":"EuroCent" },
                       { "value":0,   "currency":"EuroCent" },
                       { "value":150, "currency":"EuroCent" },
                       { "value":300, "currency":"EuroCent" },
                       { "value":450, "currency":"EuroCent" },
                       { "value":600, "currency":"EuroCent" }
                    ]
                }
                "services": {
                    "bookingAvailable": true,
                    "paymentAvailable": false,
                    "privateHireVehicleAvailable": true,
                    "taxiSharing": false,
                    "information": "An diesem Flughafen ist keine Taxibuchung möglich, bitte nutzen Sie eines der Flughafen Taxis" 
                }      
            }

##Fare for the trip specified by time and distance [/imp-endpoint/api/V2/Info/TaxiService/Fares{?totalDistance}{?totalTime}{?departureTime}{?isVan}{?isAirportPickup}{?isWomen}&{?isBooked}&{?filter}]
This response contains estimated fare for trips based on distance travelled and trip duration along with travel Options specified.

### Get fare information for the trip specified by distance and duration [GET]

+ Parameters
    + totalDistance (number, `500`) ... is in multiplier of 10 meters. 
    + totalTime (number, `15`) ...  Total travel time. Unit is in minutes. 
    + departureTime (DateTime, `2016-09-28T01:29:37+00:00`) ... Start time of the trip. 
    + isVan (boolean, `True`) ... Boolean value to specify type of vehicle. 
    + isAirportPickup (boolean, `True`) ... Boolean value. 
    + isWomen (boolean, `True`) ... Boolean value. 
    + isBooked (boolean, `True`) ... Boolean value.
    + filter (string, `{"provider":"dubaiTaxi"}`) ... Json value used to receive provider specific response

+ Response 200 (application/json)

    + Body
    
            [
                {
                    "fareQuality":  null,
                    "totalDistance": null,
                    "startTime": null,
                    "arrivalTime": null,
                    "totalTime": null,
                    "costs": {
                            "flagFall": {  "unit": "Aed", "value": 7.5},
                            "total": { "unit":"Aed" , "value": 29},
                            "distance": null,
                            "luggage": null,
                            "ccard": null,
                            "minFare": null,
                            "passengers": null
                            },
                            "services": null,
                            "provider" : "dtcLimousine"
                }            
            ]                

## Booking a taxi [/imp-endpoint/api/V2/Resources/TaxiService/Taxis/Process?action=Book]

Book a Taxi: The taxi ride is specified by providing the starting point (address and/or geo location) and the destination.
This means that no specific, previously selected taxi is booked.

The data structure of the request:

attribute | json data type | comments
--- | --- | ---
operator | Object | Serivce Provider and authentication information
name  | String | Name of Service Provider
userId | String | Required for authentication
password | String | Required for authentication
origin | Object | Description of origin
destination | Object | Description of destination
location | Co-ordinates | [X,Y] Co-ordinate of location
address | String | Address of city and street
noteToDriver | String | Additional information for eg. pickup details for driver
numOfTravelers | String | Number of travellers
time | TimeStamp | Time of booking (yyyy-MM-dd'T'HH:mm:ssZ)
traveler | Object | traveler information
travellerId | String | Unique ID of Traveller
givenName | String | First name of Traveller
lastName | String | Last name of Traveller
phoneNo | String | Phone No. of Traveller
email | String | Passenger email
travelOptions | Object | Travel Options specified by passenger eg ["Woman","Van"]
Woman | String | If the traveller is(are) a lady(ladies)
Van | String | Choice of vehcile is a van


Further parameters might detail the request by specifying the number of passengers, availability of child seats, extra luggage etc.

The response contains the estimated costs, the taxi's licence id, and a booking id; the latter can be used to cancel the booking.

Please note: 
Since data about the traveler is usually requested by the taxi SP, we assume that the end-user (or the mobility provider) himself is responsible to register at the service provider.
We currently require one operator in the input body.
If booking is not possible, the response body explains the reason why.

### Book a taxi [POST]
    
+ Request (application/json)

    + Headers
    
            userToken: "some token"
        
    + Body
    
            {
                "operator": {
                    "name": "dubaiTaxi",
                    "userId": "MP1_1",
                    "password": "TopSecret!"
                },
                "origin" : {
                    "location": { 
                        "type": "Point",
                        "coordinates": [
                            13.40693,
                            52.51914
                        ]
                    },
                    "address": { "street": "1 Street", "houseno": "28" , "district" : "Al Nahda-1" }
                    
                },
                "destination" : {
                    "address": { "street": "28th Street", "houseno": "27A" , "district" : "Hor Al Anz East" }
                },
                "plannedRoute":{
                      "coordinates": [
                        [
                         56.29339590000003,
                            25.276890400000006
                          ],
                          [
                            56.2886442,
                            25.270915300000006
                          ],
                          [
                            54.4529625,
                            25.157674900000007
                          ]
                      ]
                    },
                "time": "2016-12-09T15:10:00+02:00",
                "numOfTravelers" : "1",
                "noteToDriver" : "لكل حرف" ,
                "traveler" : {
                    "travellerId" : "1",
                    "type": "PERSON",
                    "givenName" : "Feras_test",
                    "lastName" : "Feras_test",
                    "phoneNo" : "055465833"
                },
                "travelOptions" : [ "Women" , "Van" ]
            }

+ Response 201 (application/json)

    + Headers
    
            Location: /api/V2/Processes/4711

    + Body
    
            {
                "processId" : 123,
                "confirmation" : {
                    "confirmationId" : 456,
                    "featureType": "BOOKING"
                },
                "origin" : {
                    "location": {
                        "type": "Point",
                        "coordinates": [
                            13.40693,
                            52.51914
                        ]
                    },
                    "address": { "citycode":"10178", "city":"Berlin", "Street":"Spandauer Straße","houseno":"9" }, 
                    "time": "2013-05-01 12:00:00" 
                },
                "destination" : {
                    "address": { "citycode":"12109", "city":"Berlin", "Street":"Ullsteinstraße","houseno":"114" }
                },
                "operatorId": "BetterTaxi",
                "licenceId": "B-OB 007",
                "expectedTime": "2013-05-01T12:05:00",
                "services": {
                    "bookingAvailable": true,
                    "paymentAvailable": false,
                    "privateHireVehicleAvailable": true,
                    "taxiSharing": false,
                    "information": "An diesem Flughafen ist keine Taxibuchung möglich, bitte nutzen Sie eines der Flughafen Taxis" 
                },
                "actions": [
                    {
                        "name": "Cancel",
                        "method": "PUT",
                        "uri": "/api/V2/Processes/123?action=Cancel"
                    }
                ]
            }

## Canceling a taxi [/imp-endpoint/api/V2/Processes/123?action=cancel] 
Cancel a booking for a taxi that has been booked before. The booking id (123 in the example below) has to be provided as processID in the request.

Input in request body: 
operator including name, userId and password (for authentication)

The response contains information about the originally planned taxi ride and the cancelation fee.

If canceling is not possible, the response body explains the reason why.

### Cancel a taxi booking [PUT]
    
+ Request (application/json)

    + Headers
    
            userToken: "some token"
        
    + Body
    
            {
                "operator": {
                    "name": "BetterTaxi",
                    "userId": "MP1_1",
                    "password": "TopSecret!"
                }
            }

+ Response 201 (application/json)
    + Headers
    
            Location: /api/V2/Processes/123
            
    + Body
    
            {
                "userId": "MP1_1",
                "ride": { 
                    "origin" : {
                        "location": {
                            "type": "Point",
                            "coordinates": [
                                13.40693,
                                52.51914
                            ]
                        },
                        "address": { "citycode":"10178", "city":"Berlin", "Street":"Spandauer Straße","houseno":"9" }, 
                        "time": "2013-05-01T12:00:00" 
                    },
                    "destination" : {
                        "address": { "citycode":"12109", "city":"Berlin", "Street":"Ullsteinstraße","houseno":"114" }
                    }
                },
                "confirmation": {
                    "featureType": "CANCELATION",
                    "confirmationId": "17",
                    "fee": { "value": 0, "currency": "EUR" }
                },
                "actions": [ ]
            }

## Modifying a taxi booking [/imp-endpoint/api/V2/Processes/123?action=modify]
Modify a booking for a taxi that has been booked before. The booking id (123 in the example below) has to be provided as processID in the request.

Input in request body: 
operator name

The response contains information about the originally planned taxi ride and confirmation if the modification was successful or no.

Please note: 
If modifying is not possible, the response body explains the reason why.

### modify a taxi booking [PUT]

+ Request (application/json)

    + Headers
    
            userToken: "some token"

    + Body
    
            {
                 "operator": {
                 "name": "dtcLimousine"
                 },
                 "origin" : {
                 "location": { "type": "Point", "coordinates": [ 55.5087893, 25.333412 ] }, 
                 "address": {"city":"Sharjah",
                 "street":"Sharjah International Airport"
                 }
                 },
                 "destination" : {
                 "location": { "type": "Point", "coordinates": [ 55.3655, 25.2920 ] }, 
                 "address": {"city":"Al Nahda-1",
                 "street":"28, 1 Street"}
                 },
                 "numOfTravelers":"1",
                 "time": "2016-12-22T15:10:00+02:00",
                 "traveler":{
                 "travellerId":"4",
                 "givenName":"xyz",
                 "lastName":"lmnop",
                 "phoneNo":"7894569966"
                 }
            }

+ Response 201 (application/json)

    + Headers
    
            Location: /api/V2/Processes/123
            
    + Body
    
            {
              "process": {
                "actions": [
                    {
                        "name": "Cancel",
                        "method": "PUT",
                        "uri": "/api/V2/Processes/123?action=Cancel"
                    },{
                        "name": "modify",
                        "method": "PUT",
                        "uri": "/api/V2/Processes/123?action=modify"
                    }
                ],
                "processId": "28323",
                "confirmation": {
                  "featureType": "MODIFICATION"
                }
              }
            }
            
## Rating a taxi booking [/imp-endpoint/api/V2/Processes/123?action=rate]
Rating a booking for a taxi that has been booked before. The booking id (123 in the example below) has to be provided as processID in the request.

The rating request contains the following attributes:
attribute | json data type | comments
--- | --- | ---
rating|String|Rating in service provider specific range (e.g. 1 to 5)
rating_message|String|An optional rating message

The response contains information about confirmation if the rating was successful or no.

Please note: 
If rating is not possible, the response body explains the reason why. The system supports the rating only once, i.e. after the successful rating the process ID is not available anymore for other requests.

### Rating a taxi booking [PUT]

    
+ Request (application/json)
    + Header 
    
            userToken: "some token"

    + Body
    
            {
                "rating" : "5",
                "rating_message" : "Superb service!"
            }

+ Response 201 (application/json)

    + Headers
    
            Location: /api/V2/Processes/123
            
    + Body
    
            {
              "process": {
                "actions": [],
                "processId": "123",
                "confirmation": {
                  "featureType": "RATING"
                }
              }
            }

## Get the status of Taxi Service Booking [/imp-endpoint/api/V2/Processes/TaxiService/{processId}]
RESPONSE:
The status response will contains the following attributes:
attribute | json data type | comments
--- | --- | ---
status|String|Order status of the process as received from service provider
expectedTime|Calendar|Estimated arrival time of the taxi
licenceId|String|License id of the taxi
driver->phoneNo|String|Phone number of the taxi driver
driver->pictureUrl|Object|Image of the driver can be a URL
driver->givenName|String|Given name of the driver
driver->lastName|String|Last name of the driver
driver->rating|String|Rating of the driver as received from service provider
location|Object|Last position of taxi as standard GeoJSON with 'Point'
            
Note: As a default, SiMobility Connect allows status requests of taxi bookings until 24 hours after booked time.

### Show status of Taxi Booking [GET]

+ Response 200(application/json)

    + Body
    
            {
                "statuses": [
                {
                "status": "2",
                "driver": {
                "driverId": null,
                "phoneNo": null,
                "image": {
                "url": null,
                "image": null,
                "type": null
                },
                "givenName": null,
                "lastName": null,
                "rating": null
                },
                "licenceId": "",
                "location": null,
                "expectedTime": null
                }
              ]
            }

## Book a water taxi [/imp-endpoint/api/V2/Resources/WaterTransport/Taxis/Process?action=book] 
Book a Water Taxi: The water taxi ride is specified by providing the starting point (stationId) and the destination (stationId).

The booking request contains the following attributes:
attribute | json data type | comments
--- | --- | ---
operator->name|String|Operator name 'dubaiWaterTaxi'
time|String|Water taxi booking time in ISO-8601 format
numOfTravelers|String|Number of traveler
travelOptions|String|TravelOptions values will be "4" for 'commuter taxi' and "5" for 'chartering taxi'
duration|Long|Time duration in minutes (Mandatory for travelOption charter)
needTourGuide|Boolean|Optional attribute
origin->stationId|String|Pickup station number
destination->stationId|String|Destination station number

### Book a water taxi [POST]

+ Request (application/json)
    + Headers
    
            userToken: "some token"
        
    + Body
    
            {
              "operator": {
                "name": "dubaiWaterTaxi"
              },
              "time": "2017-04-10T12:50:00+04:00",
              "numOfTravelers": "1",
              "travelOptions": [
                "5"
              ],
              "duration": 40,
              "needTourGuide": true,
              "origin": {
                "stationId": "70"
              },
              "destination": {
                "stationId": "76"
              }
            }

+ Response 201 (application/json)
 
    + Body

            {
              "actions": [
                {
                  "name": "confirm",
                  "method": "PUT",
                  "uri": "Processes/162876?action=confirm"
                }
              ],
              "processId": "162876",
              "confirmation": {
                "featureType": "BOOKING",
                "confirmationId": "39217",
                "confirmationData": {
                  "bookingRefNo": 39217,
                  "isBookingAvailable": true,
                  "tripArrivalTime": "2017-04-10T13:40:00+04:00",
                  "nextBookingDate": null,
                  "errorResponse": null
                }
              }
            }

## Confirm water taxi [/imp-endpoint/api/V2/Processes/162876?action=confirm] 
Confirming a water taxi requires a confirmation id obtained from water taxi book response.
Also, processID has to provided in the confirm request which can be obtained from response of 
water taxi booking.

Confirm water taxi request contains the following attribute: 
attribute | json data type | comments
--- | --- | ---
numOfTravelers|Integer|Number of traveler
confirmationId|String|Confirmation id obtained from book response
notes|String|Customer notes
traveler->givenName|String|Customer name
traveler->lastName|String|Customer last name
traveler->title|String|Title "1" for 'Mr', "2" for 'Mrs' and "3" for 'Ms'
traveler->email|String|Customer Email
traveler->mobileNo|String|Customer mobile number
traveler->countryCode|String|Customer mobile country code

The response contains information about the originally planned taxi ride and confirmation if the modification was successful or no.

### Confirm a water taxi [POST]
    
+ Request (application/json)
    + Headers
    
            userToken: "some token"

    + Body
    
            {
             "numOfTravelers":2,
             "confirmationId":"39217",
             "notes":"nothing",
             "traveler":{
                  "givenName":"mobility",
                  "lastName":"siemens",
                  "title":"1",
                  "email":"mobilitysiemens@gmail.com",
                  "mobileNo":"9876543211",
                  "countryCode":"91"
                }
            }

+ Response 201 (application/json)

    + Body
    
            {
              "process": {
                "actions": [],
                "processId": "162876",
                "confirmation": {
                  "featureType": "CONFIRM",
                  "confirmationData": {
                    "confirmed": true,
                    "messages": [
                      10862,
                      "Success"
                    ]
                  }
                }
              }
            }

# Group Parking
Parking includes parking garages, park-and-ride facilities, as well as on-street parking spaces.
    
## Parking Garages with Basic Info [/imp-endpoint/api/V2/Resources/Parking/Garages{?lat}{?lng}{?radius}{?f_garages}{?filter}]
Get a list of all parking garages contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
metadata | Object | List of integrated services. See section "Metadata"
--- | --- | ---
resources | Array | Array of parking garages
--- | --- | ---
actions | Array | List of available actions on this resource (book, cancel, etc.)
id | Number | Internal parking garage identification number
description | String | Approximate location
type | String | ="ParkingGarage"
uri | URI | URI to request more details (where available)
location | Object | Standard GeoJSON with 'Point' geometry type. { "type": "Point", "coordinates": ["longitude":Number, "latitude":Number] }
provider | String | Service provider (usually equals operator)
availability | Double | Availability in percentage
operator | String | Parking space operator (usually equals provider)
totalnumber | Object | Number of lots for different categories { "handicappedOnly":Int, "womenOnly":Int, "others":Int }
lottype | Enum | Type of garage {"Parking garage", "Parking zone", "Underground car park", "Parking lot"} 

### Getting parking garages [GET]

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `10000`) ... Radius of bounding circle in meter.
    + f_garages (optional, array, `[{"category":["P+R"]}]`) ... Filter to retrieve garages of a specific category.
    + filter (optional, string, `Berlin`) ... Free text filter. Multiple strings are combined by OR.
    
+ Response 200 (application/json)   

    + Body
    
            {
                "metaData": [
                    {
                        "serviceAlias": "vmzParking",
                        "webUiUrl": "http://vmz.de/Parking",
                        "lastUpdateTime": "2014-12-16T10:14:46+01:00",
                        "messages": []
                    },
                    {
                        "serviceAlias": "city2eParking",
                        "webUiUrl": "https://www.erneuerbar-mobil.de/",
                        "lastUpdateTime": "2014-12-16T10:35:46+01:00",
                        "messages": []
                    },
                    {
                        "serviceAlias": "parkUParking",
                        "webUiUrl": "https://parku.ch/",
                        "lastUpdateTime": "2014-12-16T10:35:46+01:00",
                        "messages": []
                    }
                ],
                "resources": [
                    {
                        "actions": [
                            {
                                "name": "consume",
                                "method": "POST",
                                "uri": "Resources/Parking/Garages/50368/Process?action=consume"
                            }
                        ],
                        "id": 50368,
                        "description": "P+R Alt-Mariendorf (U)",
                        "type": "ParkingGarage",
                        "uri": "Resources/Parking/Garages/50368",
                        "location": {
                            "type": "Point",
                            "coordinates": [
                                13.3900337219238,
                                52.439266204834
                            ]
                        },
                        "provider": "vmzParking",
                        "availability": null,
                        "operator": "PR",
                        "totalnumber": {
                            "others": 125,
                            "handicappedOnly": null,
                            "womenOnly": null
                        },
                        "lottype": null
                    },
                    {
                        "actions": [
                            {
                                "name": "consume",
                                "method": "POST",
                                "uri": "Resources/Parking/Garages/50050/Process?action=consume"
                            }
                        ],
                        "id": 50050,
                        "description": "P+R Tempelhof (S + U)",
                        "type": "ParkingGarage",
                        "uri": "Resources/Parking/Garages/50050",
                        "location": {
                            "type": "Point",
                            "coordinates": [
                                13.3851003646851,
                                52.4693984985352
                            ]
                        },
                        "provider": "vmzParking",
                        "availability": null,
                        "operator": "PR",
                        "totalnumber": {
                            "others": 70,
                            "handicappedOnly": null,
                            "womenOnly": null
                        },
                        "lottype": null
                    },
                    {
                        "actions": [
                            {
                                "name": "consume",
                                "method": "POST",
                                "uri": "Resources/Parking/Garages/50399/Process?action=consume"
                            }
                        ],
                        "id": 50399,
                        "description": "P+R Heidelberger Platz (S + U)",
                        "type": "ParkingGarage",
                        "uri": "Resources/Parking/Garages/50399",
                        "location": {
                            "type": "Point",
                            "coordinates": [
                                13.3121109008789,
                                52.4807777404785
                            ]
                        },
                        "provider": "vmzParking",
                        "availability": null,
                        "operator": "PR",
                        "totalnumber": {
                            "others": 140,
                            "handicappedOnly": null,
                            "womenOnly": null
                        },
                        "lottype": null
                    }
                ]
            }

## Parking Garage with Detailed Info [/imp-endpoint/api/V2/Resources/Parking/Garages/{id}]
A single parking garage object with Detailed Information. 
The data structure of the response contains the attributes with the basic information and additionally the following attributes:

attribute | json data type | comments
--- | --- | ---
... | ... | ...
address | Object | Address {"citycode": String, "city": String, "street": String, "houseno": String }
pricing | String | Price structure 
payment | Array | Payment options {COINPAY, BANKNOTEPAY, BANKCARDPAY, CREDICARDPAY, PREPAIDCARDPAY, PAYCARDPAY, DEBITPAY}
category | Enum | P - parking, P+R park and ride, etc. { "P+R","B+R", "P", ... } 
openingHours | String | Opening hours
bookable | Boolean |  
heightLimit | Object | Height limit { "value": Number, "unit": String } 
occupancyRate | Number | Occupancy rate in percent (real time data) 
allowedStay | Object | Allowed stay { "value": Number, "unit": String } 
generalInformations | String |
restrictions | Array | Usage restrictions {"VisitorsOnly","GuestsOnly"}
services | Array | Special services { "WomenParking", "DisabledParking", "Monitored", "ChargingStation", "ParentChild", "MotorCycle", ... } 
securityComment | String |  Security features
entrance | String |

### Getting a specific garage [GET] 

+ Parameters
    + id (string, `878`, required) ... Garage ID of Connect. Can be retrieved through "Parking Garages with Basic Info". 
       
+ Response 200 (application/json)

    + Body
    
            {
                "actions": [
                    {
                        "name": "consume",
                        "method": "POST",
                        "uri": "Resources/Parking/Garages/878/Process?action=consume"
                    }
                ],
                "id": 878,
                "description": "Mitte, An der Friedrichswerderschen Kirche",
                "type": "ParkingGarageDetails",
                "uri": "Resources/Parking/Garages/878",
                "location": {
                    "type": "Point",
                    "coordinates": [
                        13.39694,
                        52.515930000000004
                    ]
                },
                "provider": "vmzParking",
                "availability": null,
                "operator": "P",
                "totalnumber": {
                    "others": 75,
                    "handicappedOnly": 0,
                    "womenOnly": 0
                },
                "lottype": "Parking lot",
                "address": {
                    "citycode": "10117",
                    "city": "Berlin",
                    "street": "Oberwallstr.",
                    "houseno": null,
                    "district": null,
                    "region": null,
                    "country": null
                },
                "pricing": "EUR 0,25 pro 15 min.<br>Mo-Fr von 19 - 9 Uhr: kostenlos<br>Sa von 14 - 9 Uhr: kostenlos<br>So: kostenlos",
                "payment": [
                    "COINPAY"
                ],
                "category": [
                    "P"
                ],
                "openingHours": null,
                "bookable": false,
                "heightLimit": null,
                "occupancyRate": null,
                "allowedStay": null,
                "generalInformations": null,
                "restrictions": null,
                "services": null,
                "securityComment": null,
                "entrance": null
            }

## OnStreet Parking Spaces [/imp-endpoint/api/V2/Resources/Parking/OnStreetSpaces{?lat}{?lng}{?radius}{?f_onStreetSpaces}{?filter}]
Get a list of OnStreet parking spaces contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`). 

OnStreet parking spaces can be filtered by the space size (Small, Medium or Large).

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
metadata | Object | List of integrated services. See section "Metadata"
--- | --- | ---
resources | Array | Array of onstreet parking spaces
--- | --- | ---
actions | Array | List of available actions on this resource (currently no actions available)
id | Number | Internal OnStreet parking space identification number
description | String | Approximate location
type | String | ="ParkingOnStreetSpace"
uri | URI | URI to request more details (where available)
location | Object | Standard GeoJSON with 'Point' geometry type. { "type": "Point", "coordinates": ["longitude":Number, "latitude":Number] }
provider | String | Parking service provider (usually equals operator)
availability | Double | Availability in percentage
operator | String | Parking space operator (usually equals provider)
size | Enum | Size of OnStreet parking space {"Large", "Medium", "Small", "Unknown"} 
accessibility | Enum | Accessibility of OnStreet parking space {"Private","Public","SemiPublic","Unknown"}

### Getting OnStreet parking [GET]

+ Parameters
    + lat (optional, number, `48.13`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `11.59`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `5000`) ... Radius of bounding circle in meter.
    + f_onStreetSpaces (optional, array, `[{"size":"Medium"}]`) ... Filter to retrieve parkings spaces of a specific size.
    + filter (optional, string, `Medium`) ... Free text filter. Multiple strings are combined by OR.
    
+ Response 200 (application/json)   

    + Body
    
            {
                "metaData": [
                    {
                        "serviceAlias": "vmzParking",
                        "webUiUrl": "http://vmz.de/Parking",
                        "lastUpdateTime": "2014-12-02T15:59:01+01:00",
                        "messages": []
                    },
                    {
                        "serviceAlias": "city2eParking",
                        "webUiUrl": "https://www.erneuerbar-mobil.de/",
                        "lastUpdateTime": "2014-12-02T16:27:45+01:00",
                        "messages": []
                    },
                    {
                        "serviceAlias": "parkUParking",
                        "webUiUrl": "https://parku.ch/",
                        "lastUpdateTime": "2014-12-02T16:27:50+01:00",
                        "messages": []
                    }
                ],
                "resources": [
                    {
                        "actions": [],
                        "id": 239,
                        "description": "Einemstraße",
                        "type": "ParkingOnStreetSpace",
                        "uri": "Resources/Parking/OnStreetSpaces/239",
                        "location": {
                            "type": "Point",
                            "coordinates": [
                                13.352953,
                                52.502795
                            ]
                        },
                        "provider": "parkUParking",
                        "availability": 100,
                        "operator": "ParkU",
                        "size": "Large",
                        "accessibility": null
                    }
                ]
            }

## OnStreet Space with Detailed Info [/imp-endpoint/api/V2/Resources/Parking/OnStreetSpaces/{id}]
A single OnStreet Space object with Detailed Information. 
The data structure of the response contains the attributes with the basic information and additionally the following attributes:

attribute | json data type | comments
--- | --- | ---
... | ... | ...
address | Object | Address {"citycode": String, "city": String, "street": String, "houseno": String }
barrier | boolean | Entry/exit barrier 
indoor | boolean | covered parking
patio | String | 
barrierFree | boolean | Barrier-free accessible
category | Array | List of enums describing features
usage | String | Description how to enter or use the parking space

### Getting a specific OnStreet Space [GET] 


+ Parameters
    + id (string, `907`, required) ... Parking space ID of Connect. Can be retrieved through "OnStreet Parking Spaces". 
        
+ Response 200 (application/json)

    + Body
    
            {
                "actions": [],
                "id": 907,
                "description": "Kleine Rosenthaler Str.",
                "type": "ParkingOnStreetSpaceDetails",
                "uri": "Resources/Parking/OnStreetSpaces/907",
                "location": {
                    "type": "Point",
                    "coordinates": [
                        13.403188,
                        52.528512
                    ]
                },
                "provider": "parkUParking",
                "availability": 100,
                "operator": "ParkU",
                "size": "Large",
                "accessibility": null,
                "address": {
                    "citycode": "10119",
                    "city": "Berlin",
                    "street": "Kleine Rosenthaler Str.",
                    "houseno": "12",
                    "district": null,
                    "region": null,
                    "country": "DE"
                },
                "barrier": true,
                "indoor": true,
                "patio": null,
                "barrierFree": true,
                "category": [
                    "attribute/available/true",
                    "attribute/traffic/sharingOperator/ParkU",
                    "point/traffic/parking/p/dynamic"
                ],
                "usage": "Tiefgarage Hotel  AMANO, kameraüberwacht, freie Platzwahl, Ausfahrt Rosenthaler Straße (QR-Code auf Rezeptionsklingel); zum Öffnen der Tore benötigen Sie die parku-App.\r\n\r\n5 Minuten zum Hackeschen Markt oder Rosenthaler Platz."
            }

## Parking Garages or OnStreet parking spaces or both [/imp-endpoint/api/V2/Resources/Parking{?lat}{?lng}{?radius}&{?f_onStreetSpaces}{?f_garages}{?filter}]    
Get a list of all parking garages or OnStreet parking spaces or both contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).
The parking possibilities can be filtered by garage category (viz. P+R or P) or space size (Small, Medium or Large).

The response contains attributes from parking garages or OnStreet parking spaces or both.

### Getting parking garages or OnStreet parking spaces or both with specified size and category [GET]

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `1000`) ... Radius of bounding circle in meter.
    + f_onStreetSpaces (optional, array, `[{"size":"Large"}]`) ... Filter to retrieve parking spaces of a specific size.
    + f_garages (optional, array, `[{"category":["P+R"]}]`) ... Filter to retrieve parking spaces of a specific category.
    + filter (optional, string, `Large PR`) ... Free text filter. Multiple strings are combined by OR.

+ Response 200 (application/json)   

    + Body
    
            {
                "metaData": [
                    {
                        "serviceAlias": "vmzParking",
                        "webUiUrl": "http://vmz.de/Parking",
                        "lastUpdateTime": "2014-11-20T12:55:14+01:00",
                        "messages": []
                                        },
                    {
                        "serviceAlias": "city2eParking",
                        "webUiUrl": "https://www.erneuerbar-mobil.de/",
                        "lastUpdateTime": "2014-11-20T13:22:50+01:00",
                        "messages": []
                    },
                    {
                        "serviceAlias": "parkUParking",
                        "webUiUrl": "https://parku.ch/",
                        "lastUpdateTime": "2014-11-20T13:22:54+01:00",
                        "messages": []
                    }
                ],
                "resources": [
                    {
                        "actions": [],
                        "id": 2838,
                        "description": "Lohmeyerstraße",
                        "type": "OnStreetSpaces",
                        "uri": "Resources/Parking/OnStreetSpaces/2838",
                        "location": {
                            "type": "Point",
                            "coordinates": [
                                13.301087,
                                52.517519
                            ]
                        },
                        "provider": "parkUParking",
                        "availability": 100,
                        "operator": "ParkU"
                    },
                    {
                        "actions": [],
                        "id": 239,
                        "description": "Einemstraße",
                        "type": "OnStreetSpaces",
                        "uri": "Resources/Parking/OnStreetSpaces/239",
                        "location": {
                            "type": "Point",
                            "coordinates": [
                                13.352953,
                                52.502795
                            ]
                        },
                        "provider": "parkUParking",
                        "availability": 100,
                        "operator": "ParkU"
                    }
                ]
            }

# Group EV Charging

## EV Charging Stations [/imp-endpoint/api/V2/Resources/EVCharging/Stations{?lat}{?lng}{?radius}]

+ Attributes 
    + metaData(array[EV Charging Meta Data])
    + resources (array[EV Charging Base])

### Get EV Charging Stations [GET]
Get a list of all electric vehicle (EV) charging stations contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `1000`) ... Radius of bounding circle in meter.

+ Response 200 (application/json)
    + Attributes   (EV Charging Stations)

## EV Charging Station with Details [/imp-endpoint/api/V2/Resources/EVCharging/Stations/{stationId}]

+ Attributes (EV Charging Base)
    + chargingStationType: `CS Smart SN22 16A/16A (XML)` (string, nullable)
    + managedChargeable: false (boolean)
    + owner: `Vattenfall Halböffentlich` (string, nullable)
    + voltage: 400 (number)
    + properties (object, nullable)
    + numberOfUnits: 2 (number)
    + availableUnits: 0 (number)
    + unit (array)
        + (object)
            + description: `+49*809*010*150109`
            + state: `IN_USE` (enum)
              - `FREE`
              - `IN_USE`
              - `UNKNOWN`
              - `DEFECTIVE`
              - `CLOSED`
            + plugType (EV Plug Type)
                + Sample
                    + `Type2Outlet`

### Get EV Charging Station with Details  [GET] 
Get details of a specific charging station. 

+ Parameters
    + stationId (string, `4516`, required) ... Station ID of Connect. Can be retrieved through "List of EV Charing Stations with Basic Info".

+ Response 200 (application/json)
    + Attributes (EV Charging Station with Details)

# Group Traffic Incidents
This is a group of all incidents related REST resources.

## List of Incidents [/imp-endpoint/api/V2/Info/Incidents{?lat}{?lng}{?radius}] 
Get a list of recent general incidents (incidents that affect public AND individual transport) contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
category | Enum | {"Roadworks", "Blockade", "Indefinition"} are the categories for the incidents with type "IncidentIndividualTransport", {"ConstructionProject", "Imbalance", "Diversion", "RailReplacement", "ShuttleService"} are the categories for incidents with type "IncidentPublicTransport"
message | String | 
timePeriod | Object | Time period of the incident
reason | String | Full description of reason
reasonShort | String | Short description of reason
consequence | String | Full description of consequence
consequenceShort | String | Short description of consequence
location | Object | Standard GeoJSON with 'Point' geometry type. { "type": "Point", "coordinates": ["longitude":Number, "latitude":Number] }
source | String | {= "PT", "INKO", etc.}
affectedTrips | Array | List of affected trips
net | NetType  | 
description | String | Description of an incident information
type | String | There are 2 types of incidents: Incidents with the type "IncidentIndividualTransport" affect individual transport (car, bicycle), incidents with the type "IncidentPublicTransport" affect public transport (bus, tram, etc.).
uri | URI | URI
provider | String | Service provider
operator | Enum | {"News", etc.}
externalResourceId | String | ID in external provider system

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `2000`) ... Radius of bounding circle in meter.
    
+ Model (application/json)

    + Body
    
            [
                {
                    "category": "Blockade",
                    "message": "Closed Road",
                    "timePeriod": {
                        "from": "2012-11-09T12:00:00+01:00",
                        "to": "2014-08-31T17:00:59+02:00"
                    },
                    "reason": null,
                    "reasonShort": null,
                    "consequence": null,
                    "consequenceShort": null,
                    "location": {
                        "type": "Point",
                        "coordinates": [
                            13.319420000000036,
                            52.51774
                        ]
                    },
                    "source": "INKO",
                    "affectedTrips": null,
                    "net": [],
                    "description": "Roadworks carriageway reduced from 2 to 1 lane traffic, congestion has to be expected road closed direction closed",
                    "type": "IndividualTransport",
                    "uri": null,
                    "provider": "vmz_trafficinfo",
                    "operator": "News",
                    "externalResourceId": "INKO_113388"
                },
                {
                    "category": "Roadworks",
                    "message": "Road Work",
                    "timePeriod": {
                        "from": "2012-04-11T09:00:00+02:00",
                        "to": "2016-05-15T17:00:59+02:00"
                    },
                    "reason": null,
                    "reasonShort": null,
                    "consequence": null,
                    "consequenceShort": null,
                    "location": {
                        "type": "Point",
                        "coordinates": [
                            13.39682,
                            52.51753
                        ]
                    },
                    "source": "INKO",
                    "affectedTrips": null,
                    "net": [],
                    "description": "Roadworks, new road layout, carriageway reduced to one lane",
                    "type": "IndividualTransport",
                    "uri": null,
                    "provider": "vmz_trafficinfo",
                    "operator": "News",
                    "externalResourceId": "INKO_113041"
                }
            ]


### Getting all incidents [GET]

+ Response 200

    [List of Incidents][]
    
## List of individual transport Incidents [/imp-endpoint/api/V2/Info/Incidents/IndividualTransport{?lat}{?lng}{?radius}] 
Get list of recent incidents that affect individual transport only contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

The data structure contains the attributes as in *[/imp-endpoint/api/V2/Info/Incidents?lat={lat}&lng={lng}&radius={radius]* and additionally the roadName attribute.

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `2000`) ... Radius of bounding circle in meter.
    
+ Model

        [
            {
                "category": "Blockade",
                "message": "Closed Road",
                "timePeriod": {
                    "from": "2014-01-06T11:03:00+01:00",
                    "to": "2014-12-31T23:59:00+01:00"
                },
                "reason": null,
                "reasonShort": null,
                "consequence": null,
                "consequenceShort": null,
                "location": {
                    "type": "Point",
                    "coordinates": [
                        13.385821218640254,
                        52.51680860970485
                    ]
                },
                "source": "Concert",
                "affectedTrips": null,
                "net": [],
                "description": "Roadworks, direction closed",
                "type": "IndividualTransport",
                "uri": null,
                "provider": "vmz_trafficinfo",
                "operator": "News",
                "externalResourceId": "2147338066",
                "roadName": "Unter den Linden (Mitte)"
            },
            {
                "category": "Roadworks",
                "message": "Road Work",
                "timePeriod": {
                    "from": "2012-04-11T09:00:00+02:00",
                    "to": "2016-05-15T17:00:59+02:00"
                },
                "reason": null,
                "reasonShort": null,
                "consequence": null,
                "consequenceShort": null,
                "location": {
                    "type": "Point",
                    "coordinates": [
                        13.39682,
                        52.51753
                    ]
                },
                "source": "INKO",
                "affectedTrips": null,
                "net": [],
                "description": "Roadworks, new road layout, carriageway reduced to one lane",
                "type": "IndividualTransport",
                "uri": null,
                "provider": "vmz_trafficinfo",
                "operator": "News",
                "externalResourceId": "INKO_113041",
                "roadName": "Unter den Linden (Mitte)"
            }
        ]

### Getting recent general incidents that affect individual transport only in a specific area. [GET]

+ Response 200

    [List of individual transport Incidents][]

## List of public transport Incidents [/imp-endpoint/api/V2/Info/Incidents/PublicTransport{?lat}{?lng}{?radius}] 
Get a list of recent incidents that affect public transport only contained within a specified area. This area can be either a circle (`lat`, `lng`, `radius`) or rectangle (`left_lower_lat`, `left_lower_lng`, `right_upper_lat`, `right_upper_lng`).

The data structure contains the attributes as in *[/imp-endpoint/api/V2/Info/Incidents?lat={lat}&lng={lng}&radius={radius]* and additionally information about line name, first and last stop and line direction.

+ Parameters
    + lat (optional, number, `52.52`) ... Latitude of bounding circle`s center point.
    + lng (optional, number, `13.39`) ... Longitude of bounding circle`s center point.
    + radius (optional, number, `2000`) ... Radius of bounding circle in meter.

+ Model (application/json)

    + Body
    
            [
                {
                    "category": "ConstructionProject",
                    "message": "Disruption",
                    "timePeriod": {
                        "from": "2013-08-26T01:00:00+02:00",
                        "to": null
                    },
                    "reason": "Sperrung wegen Bauarbeiten der BVG",
                    "reasonShort": "Sperrung wegen Bauarbeiten der BVG",
                    "consequence": "Die Linie verkehrt nur zwischen Riesaer Str. und S Hackescher Markt. Die Haltestellen zwischen S Hackescher Markt und U Schwartzkopffstr. werden nicht bedient. Ein Ersatzverkehr mit Bussen ist nicht eingerichtet. Fahrempfehlung: Fahrgäste in Richtung U Schwartzkopffstr. nutzen zur Weiterfahrt bitte die Linien M1 bzw. 12 von der Haltestelle S Hackescher Markt in der Rosenthaler Str. bis U Oranienburger Tor bzw. die S-Bahn bis S+U Friedrichstr. und von dort die U6 in Richtung Alt-Tegel.",
                    "consequenceShort": "Bauarbeiten, Sperrung Streckenabschnitt lnvalidenstr./Chausseestr. &lt;&gt; U Schwartzkopffstr.",
                    "location": {
                        "type": "Point",
                        "coordinates": [
                            13.40267888888889,
                            52.52165861111111
                        ]
                    },
                    "source": "PT",
                    "affectedTrips": null,
                    "net": [],
                    "description": "Baumaßnahme",
                    "type": "PublicTransport",
                    "uri": null,
                    "provider": "vmz_trafficinfo",
                    "operator": "News",
                    "externalResourceId": "BVG50554",
                    "direction": "Beide",
                    "firstStop": "S Hackescher Markt",
                    "lastStop": "S Hackescher Markt",
                    "lineName": {
                        "name": "M6",
                        "trafficType": "Tram"
                    }
                },
                {
                    "category": "Diversion",
                    "message": "Disruption",
                    "timePeriod": {
                        "from": "2014-07-02T04:00:00+02:00",
                        "to": null
                    },
                    "reason": "Sperrung wegen Bauarbeiten",
                    "reasonShort": "Sperrung wegen Bauarbeiten",
                    "consequence": "Die Linie muss in Fahrtrichtung S+U Zoologischer Garten über Caroline-Michaelis-Str., Julie-Wolfthorn-Str., Zinnowitzer Str., Chausseestr., Habersaathstr. und Schwarzer Weg umgeleitet werden.",
                    "consequenceShort": "Bauarbeiten, Umleitung",
                    "location": {
                        "type": "Point",
                        "coordinates": [
                            13.382412777777777,
                            52.53041916666667
                        ]
                    },
                    "source": "PT",
                    "affectedTrips": null,
                    "net": [],
                    "description": "Umleitung / geänderte Haltestellenbedienung",
                    "type": "PublicTransport",
                    "uri": null,
                    "provider": "vmz_trafficinfo",
                    "operator": "News",
                    "externalResourceId": "BVG54186",
                    "direction": "Beide",
                    "firstStop": "S Nordbahnhof/Gartenstr.",
                    "lastStop": "Invalidenpark",
                    "lineName": {
                        "name": "245",
                        "trafficType": "Bus"
                    }
                }
            ]

### Getting recent general incidents that affect public transport only in a specific area. [GET]

+ Response 200

    [List of public transport Incidents][]

# Group WMS
This is a group of all REST resources delivered as WMS.

## WMS PNG file for Points of Interest [/imp-endpoint/api/V2/Resources{?left_lower_lat}{?left_lower_lng}{?right_upper_lng}{?right_upper_lat}{?width}{?heigth}{?serviceNames}]
Get WMS PNG file for points of interests specified by (several) service categories (e.g. PublicTransport, Parking, etc.)

### Getting a WMS PNG file [GET] 

Please note, the accept-header of this request must be set to "image/png".

+ Parameters
    + left_lower_lat (number, `52.482`) ... Left lower latitude
    + left_lower_lng (number, `13.315`) ... Left lower longitude    
    + right_upper_lng (number, `13.359`) ... Right upper longitude
    + right_upper_lat (number, `52.509`) ... Right upper latitude
    + width (optional, number, `250`) ... Width of map output in pixels (semantics according to WMS GetMap request). The default value is width=250.
    + heigth (optional, number, `250`) ... Height of map output in pixels (semantics according to WMS GetMap request). The default value is height=250.
    + serviceNames (string, `Parking,PublicTransport`) ... Service names, comma-separated list of service categories (currently offered as WMS layers by VMZ), e.g. PublicTransport, Parking

+ Request

    + Headers
        
            accept: image/png 

+ Response 200 (image/png)

    + Body
    
            ?PNG

## WMS PNG file for Public Transport Stations [/imp-endpoint/api/V2/Resources/PublicTransport{?left_lower_lat}{?left_lower_lng}{?right_upper_lng}{?right_upper_lat}{?width}{?heigth}]
Get WMS PNG file for public transport stations

### Getting a public transport stations WMS PNG file [GET] 

Please note: The accept-header of this request must be set to "image/png"

+ Parameters
    + left_lower_lat (number, `52.482`) ... Left lower latitude
    + left_lower_lng (number, `13.315`) ... Left lower longitude    
    + right_upper_lng (number, `13.359`) ... Right upper longitude
    + right_upper_lat (number, `52.509`) ... Right upper latitude
    + width (optional, number, `250`) ... Width of map output in pixels (semantics according to WMS GetMap request). The default value is width=250.
    + heigth (optional, number, `250`) ... Height of map output in pixels (semantics according to WMS GetMap request). The default value is height=250.

+ Request

    + Headers
        
            accept: image/png 

+ Response 200 (image/png)
         
    + Body
    
            ?PNG

## WMS PNG file for Current Traffic [/imp-endpoint/api/V2/Info/TrafficInfo{?left_lower_lat}{?left_lower_lng}{?right_upper_lng}{?right_upper_lat}{?width}{?heigth}]
Get WMS PNG file for current traffic

### Getting a current traffic WMS PNG file [GET] 

Please note: The accept-header of this request must be set to "image/png"

+ Parameters
    + left_lower_lat (number, `52.482`) ... Left lower latitude
    + left_lower_lng (number, `13.315`) ... Left lower longitude    
    + right_upper_lng (number, `13.359`) ... Right upper longitude
    + right_upper_lat (number, `52.509`) ... Right upper latitude
    + width (optional, number, `250`) ... Width of map output in pixels (semantics according to WMS GetMap request). The default value is width=250.
    + heigth (optional, number, `250`) ... Height of map output in pixels (semantics according to WMS GetMap request). The default value is height=250.

+ Request

    + Headers

            accept: image/png 

+ Response 200 (image/png)
         
    + Body
    
            ?PNG

# Group Geo Locations

## Geo Locations [/imp-endpoint/api/V2/Info/GeoLocations{?input}{?language}{?lat}{?lng}{?type}]
Get list of geo locations for given parameters. Matching locations including geo-coordinates will be provided for a given textual address.

### Get list of geo locations [GET]

attribute | json data type | comments
--- | --- | ---
input | String | a search string
lat | String | prioritized latitude 
lng | String | prioritized Longitude
language | String | international abbreviation for language
type |ENUM | type of locations "station", "address", "poi", or "all"

+ Parameters
    + input (string, `Berlin, Mollstrasse 7`) ... Search string. 
    + lat (number, `52.482`, optional) ... Prioritized latitude value. The results will be ranked according to the given geo-coordinate. Rigth now this parameter has no effect.
    + lng (number, `13.315`, optional) ... Prioritized longitude value. The results will be ranked according to the given geo-coordinate. Rigth now this parameter has no effect.
    + language (string, `en`, optional) ... International abbreviation of language in which the content will be provided, if it is available in this language. 
    + type (string, `station`, optional) ...  type of locations. 

+ Response 200 (application/json)

    + Body
    
            [
                {
                    "searchLocation": "Berlin, Mollstrasse 7",
                    "rankedLocations": [
                        {
                            "type": "Place",
                            "description": "Berlin (Germany)",
                            "location": {
                               "coordinates": [
                                    13.421097,
                                    52.5236814
                               ],
                               "type": "Point"
                            },
                            "address": {
                                "citycode": "10178",
                                "city": "Berlin",
                                "street": "Mollstraße",
                                "houseno": "7",
                                "district": null,
                                "region": "Berlin",
                                "country": "Germany"
                            },
                            "level": null,
                            "rank": null,
                            "geocoder": "PhotonGeocoder"
                        },
                        {
                            "type": "Amenity",
                            "description": "Kita Traumzauberbaum, Berlin (Germany)",
                            "location": {
                                "coordinates": [
                                    13.421197012371714,
                                    52.52326395
                                ],
                                "type": "Point"
                            },
                            "address": {
                                "citycode": "10178",
                                "city": "Berlin",
                                "street": "Mollstraße",
                                "houseno": "7a",
                                "district": null,
                                "region": "Berlin",
                                "country": "Germany"
                            },
                            "level": null,
                            "rank": null,
                            "geocoder": "PhotonGeocoder"
                        }
                    ]
                }
            ]

# Group Business Areas

## Business Area Info [/imp-endpoint/api/V2/Info/ServiceOffering/{id}/BusinessArea]    
Business area of a (free-floating) service (cars, bikes) specified by service offering id.

The data structure contains the following attributes:

Attribute | JSON Data Type | Comments
--- | --- | ---
operator | String |  operator id. Example values: Car2Go_Berlin, DriveNow, NextBike, CallABike etc
description | String |  ...
serviceCategory |ENUM | IMP service categories "CarSharing", "BikeSharing", etc
businessBoundary | Object | business area specified as MultiPolygon conform to the following GeoJSON Format Specification: http://geojson.org/geojson-spec.html

### Getting Business Area [GET]

+ Response 200 (application/json)

    + Body
            
            {
              "operator": "Car2Go_Berlin",
              "description": "Wagen zum Gehen ",
              "serviceCategory": "CarSharing",
              "businessBoundary": {
                "disjunctedBoundary": {
                  "type": "MultiPolygon",
                  "coordinates": [
                  [[[12.977235,52.53996],[12.977782,52.540586],[12.977782,52.541037],[12.977793,52.541905],[12.978501,52.541924],[12.978995,52.541885]],
                      [[13.29696,52.550631],[13.297985,52.550729],[13.298113,52.55021],[13.297314,52.550135],[13.297051,52.550178],[13.29696,52.550631]]]
                      ],
                  "crs": {
                    "type": "name",
                    "properties": {
                      "name": "WGS84"
                    }
                  }
                },
                "negatedBoundary": {
                  "type": "MultiPolygon",
                  "coordinates": [
                  [[[13.366665,52.476409],[13.366386,52.476377],[13.366161,52.475619],[13.366123,52.475256],[13.366236,52.475158],[13.366413,52.475164],[13.366488,52.475275],[13.366665,52.476409]],
                      [[13.314314,52.530452],[13.313885,52.530347],[13.312082,52.535359],[13.326759,52.537317],[13.327746,52.536821]]]
                      ],
                  "crs": {
                    "type": "name",
                    "properties": {
                      "name": "WGS84"
                    }
                  }
                }
              }
            }
 
# Group Heatmap
This is a group of all REST resources related to request heatmaps as PNG files. A heat map is a graphical representation of data where the individual values are represented as colors.
Currently it is used to represent distribution of the resouces of two service categories, Car and Bike Sharing.

## CarSharing Heatmap [/imp-endpoint/api/V2/Info/Heatmap/CarSharing{?date}{?left_lower_lat}{?left_lower_lng}{?right_upper_lat}{?right_upper_lng}{?width}{?height}]    
Get WMS PNG file for carSharing for a specific date (in the past, current date or in the future) and for a specific bounding box (place).
If the date is in the past, the returned image with green areas represents historical data of car sharing availability, if the date is in the future, the returned image with blue dots represents a prediction of car sharing availability. This interface is deprecated.

### Getting heatmap as PNG image [GET]

+ Parameters
    + date (required, number, `1404892800000`) ... A date in the past for historical data / in the future for predictions.
    + left_lower_lat (number, `52.482`) ... Latitude of bounding box's bottom left corner.
    + left_lower_lng (number, `13.315`) ... Longitude of bounding box's bottom left corner.    
    + right_upper_lat (number, `52.509`) ... Latitude of bounding box's top right corner.
    + right_upper_lng (number, `13.359`) ... Longitude of bounding box's top right corner.
    + width (required, number, `480`) ... Width of image in pixels
    + height (required, number, `800`) ... Height of image in pixels
    
+ Request
    + Headers
        
            accept: image/png 

+ Response 200 (image/png)

    + Body
    
            ?PNG

## BikeSharing Heatmap [/imp-endpoint/api/V2/Info/Heatmap/BikeSharing{?date}{?left_lower_lat}{?left_lower_lng}{?right_upper_lat}{?right_upper_lng}{?width}{?height}]    
Get WMS PNG file for bike sharing for a specific date and for a specific bounding box (place). This interface is deprecated.

### Getting heatmap as PNG image [GET]

+ Parameters
    + date (required, number, `1404892800000`) ... A date in the past for historical data / in the future for predictions. 
    + left_lower_lat (number, `52.482`) ... Latitude of bounding box's bottom left corner.
    + left_lower_lng (number, `13.315`) ... Longitude of bounding box's bottom left corner.    
    + right_upper_lat (number, `52.509`) ... Latitude of bounding box's top right corner.
    + right_upper_lng (number, `13.359`) ... Longitude of bounding box's top right corner.
    + width (required, number, `255`) ... Width of image in pixels
    + height (required, number, `255`) ... Height of image in pixels

+ Request
    + Headers
        
            accept: image/png 

+ Response 200 (image/png)

    + Body
    
            ?PNG


# Group Notifications
This group contains the interface for requesting status notifications.

## Request notification for changes to an earlier retrieved Resource
Get a list for requesting notification for changes to an earlier retrieved Resource.

### Open a Web Socket connection with the URI (/imp-endpoint/api/V2/WebSocket/Open)

Following request attributes needs to be sent:

attribute | data type | comments
--- | --- | ---
username | String | username
password | String | password


### Subscribe for receiving notification messages
Subscribe for receiving notification by sending a subscription message.
The subscription request contains the resource ID (id) and the time (timeInSec) the subscriber wants to receive notification about status changes of this resource.
Multiple subscription messages may be send via a websocket.

REQUEST MESSAGE:

    { "id": 11689, "timeInSec": 120 }

### Receive notification messages
Receive notification message containing information of requested Resources. The message contains details as in Resources List of any type such as bike sharing, car sharing, and so on.

NOTIFICATION MESSAGE:

             {
                "actions":[],
                "id":11689,
                "description":"Ladestation RWE Effizienz GmbH",
                "type":"EVChargingStationDetails",
                "uri":null,
                "location":{
                    "coordinates":[
                        13.390248,
                        52.51897
                    ],
                "type":"Point"},
                "provider":"hubject",
                "availability":0.0,
                "operator":"Hubject",
                "modFlag":"Modified",
                "address":
                {
                    "citycode":"10117",
                    "city":"Berlin",
                    "street":"Planckstr.",
                    "houseno":"4",
                    "district":null,
                    "region":"11",
                    "country":"DEU"
                },
                "plugTypes":["Type2Outlet"],
                "power":null
            }


# Group Partners

## Partners [/imp-endpoint/api/V2/Partners]

+ Attributes (array) 
    + (Partner)

### Get Partners [GET]
Get a list of all partners registered for SiMobility Connect. 
>NOTE: For admin only

+ Response 200 (application/json)
    + Attributes (Partners)

+ Response 401 (application/json)
    + Attributes (object)
        + errorCode: 401 (string)
        + errorMessage: UNAUTHORIZED
        + type: UNAUTHORIZED
        + source: IMP_ENDPOINT

### Sign up a new Partner [POST]
The sign-up request must be approved by the admin before the new partner is registered.

+ Attributes (object)
    + companyName: Siemens (required)
    + mobilityBusinessDescription: `Siemens Mobilty offers intelligent and efficient mobility solutions for urban, interurban and freight transportation.` (optional)
    + legalRegistration: `DE129274202` (string, required)
    + website: `https://www.siemens.com/global/en/home.html` (string, optional)
    + companyDescription: `Siemens AG is a German conglomerate company headquartered in Berlin and Munich and the largest industrial manufacturing company in Europe with branch offices abroad.` (string, optional)
    + users (array, required)
        + (object)
            + userName: maxMustermann (required)
            + surName: Mustermann (required)
            + givenName: Max (required)
            + jobTitle: Important Guy (optional)
            + address (required)
                + country: Germany (required)
                + city: Munich (required)
                + cityCode: 81739 (required)
                + street: `Otto-Hahn-Ring 6`
            + email: `max.mustermann@siemens.com` (required)
            + password (string, nullable, required)
            + department: Top (optional)
            + phone (string, nullable, optional)
            + cellPhone (string, nullable, optional)
            + fax (string, nullable, optional)
            + contactMethod: Email (enum, required)
                + Email
                + Phone
            + userSecurityValidations (array, required)
                + (object)
                    + question (object)
                        + id: 42 (number)
                        + key: `In what town was your first job?`
                        + message: `In what town was your first job?`
                    + answer: Munich
                + (object)
                    + question (object)
                        + id: 38 (number)
                        + key: `In what city or town did your mother and father meet?`
                        + message: `In what city or town did your mother and father meet?`
                    + answer: Munich
    + roles (array, required)
        + (enum)
            + SERVICEPROVIDER
            + MOBILITYPROVIDER
            + IMP
            + Sample
                + SERVICEPROVIDER

+ Request (application/json)

+ Response 204(application/json)

## Partner [/imp-endpoint/api/V2/Partners/{PartnerId}]

+ Attributes (object)
    + id: 56 (number)
    + companyName: Siemens (required)
    + mobilityBusinessDescription: `Siemens Mobilty offers intelligent and efficient mobility solutions for urban, interurban and freight transportation.` (required)
    + legalRegistration: `DE129274202` (string, required)
    + website: `https://www.siemens.com/global/en/home.html` (string, required)
    + companyDescription: `Siemens AG is a German conglomerate company headquartered in Berlin and Munich and the largest industrial manufacturing company in Europe with branch offices abroad.` (string, required)
    + status: ACTIVE (enum, required)
        + REQUESTED
        + ACTIVE
        + DISABLED
        + REJECTED
    + users (array, required)
        + (object)
            + userName: maxMustermann (required)
            + surName: Mustermann (required)
            + givenName: Max (required)
            + jobTitle: Important Guy (required)
            + address (required)
                + country: Germany
                + city: Munich
                + cityCode: 81739
                + street: `Otto-Hahn-Ring 6`
            + email: `max.mustermann@siemens.com` (required)
            + partnerRoles (array, required)
                + (enum)
                    + SERVICEPROVIDER
                    + MOBILITYPROVIDER
                    + IMP
                    + Sample
                        + SERVICEPROVIDER
            + password (string, nullable, required)
            + oldpassword (string, nullable, required)
            + department: Top (required)
            + phone (string, nullable, required)
            + cellPhone (string, nullable, required)
            + fax (string, nullable, required)
            + lastLoginTime: 1501089074857 (number, required)
            + failedLoginAttempts: 0
            + lockTimeout (number, nullable)
            + contactMethod: Email (enum, required)
                + Email
                + Phone
            + userSecurityValidations (array)
                + (object)
                    + question (object)
                        + id: 42 (number)
                        + key: `In what town was your first job?`
                        + message: `In what town was your first job?`
                    + answer: Munich
                + (object)
                    + question (object)
                        + id: 38 (number)
                        + key: `In what city or town did your mother and father meet?`
                        + message: `In what city or town did your mother and father meet?`
                    + answer: Munich
            + group: Partner
    + roles (array, required)
        + (enum)
            + SERVICEPROVIDER
            + MOBILITYPROVIDER
            + IMP
            + Sample
                + SERVICEPROVIDER
    + businessBoundary (string, nullable, required)
    + businessBoundaryFileName (string, nullable)
    + businessBoundaryFileUploadTime (string, nullable)

### Get Partner [GET]
Get information about an individual partner
>NOTE: For admin only

+ Parameters
    + PartnerId (required, number, `56`) ... ID of the partner.

+ Response 200 (application/json)
    + Attributes (Partner)

+ Response 401 (application/json)
    + Attributes (object)
        + errorCode: 401 (string)
        + errorMessage: UNAUTHORIZED
        + type: UNAUTHORIZED
        + source: IMP_ENDPOINT

### Update Partner [PUT]
Update partner information
>NOTE: For admin only

+ Attributes (Partner)

+ Request (application/json)

+ Response 204 (application/json)

+ Response 401 (application/json)
    + Attributes (object)
        + errorCode: 401 (string)
        + errorMessage: UNAUTHORIZED
        + type: UNAUTHORIZED
        + source: IMP_ENDPOINT

## Partner self [/imp-endpoint/api/V2/Partners/self]

### Get Partner self [GET]
Get information of your own partner profile.

+ Response 200 (application/json)
    + Attributes (Partner)

### Update Partner self [PUT]
Update information of your own partner profile.

+ Attributes (Partner)

+ Request (application/json)

+ Response 204 (application/json)

# Group Users

## User Token [/imp-endpoint/api/V2/Partners/User/Process{?action}]
The mobility provider shall generate a separate user token for each end customer in order to be able to differentiate activities of end users in SiMobility Connect without knowing all the details of specific end users.
In case a previously created token is not valid anymore, the mobility provider needs to request a new token for this end user.

+ Attributes (object)
    + id: 137533 (number)
    + partnerId: 96 (number)
    + token: `c04c5446-d11d-4162-a3a5-135fbf557f25`

+ Parameters
    + action (string, required, `register`) ... String `action` must have value "register" to start token generation.

### Generate User Token [POST]
Starts "User Token Generation" Process

+ Request (application/json)

+ Response 201 (application/json)
    +  Attributes (User Token)

## User Transactions [/imp-endpoint/api/V2/Partners/User/Transactions{?startDate}{?endDate}]

+ Attributes (array)
    + (object)
        - serviceCategory: Parking
        - serviceType: consumption
        - serviceDescription: `vmzParking : consumption`
        - unit: EUR
        - value: 0 (number)
        - startTime: `2014-01-07T12:38:39+05:30`
        - endTime: `2014-01-07T12:38:39+05:30`

+ Parameters
    + startDate (string, `2013-12-18`, optional) ... Default: last month
    + endDate (string, `2013-12-30`, optional) ... Default: last month

### Get user transactions [GET]
Get transactions of a given user in a given time period.

+ Request (application/json)
    + Headers
    
            userToken: "someUserToken"

+ Response 200 (application/json)
    + Attributes (User Transactions)

# Group Services

## Service Categories [/imp-endpoint/api/V2/ServiceCategories] 

+ Attributes (array)
    +  (object)
        + id: 50 (number)
        + name: Parking (string)
    +  (object)
        + id: 51 (number)
        + name: PublicTransport (string)
    +  (object)
        + id: 52 (number)
        + name: TrafficInfo (string)
    +  (object)
        + id: 53 (number)
        + name: Ticketing (string)
    +  (object)
        + id: 54 (number)
        + name: CarSharing (string)
    +  (object)
        + id: 55 (number)
        + name: BikeSharing (string)
    +  (object)
        + id: 56 (number)
        + name: EVCharging (string)
    +  (object)
        + id: 57 (number)
        + name: WMS (string)
    +  (object)
        + id: 58 (number)
        + name: JourneyPlanner (string)
    +  (object)
        + id: 59 (number)
        + name: CarJourneyPlanner (string)
    +  (object)
        + id: 60 (number)
        + name: BikeJourneyPlanner (string)
    +  (object)
        + id: 61 (number)
        + name: TaxiService (string)
    +  (object)
        + id: 62 (number)
        + name: GeoCoding (string)
    +  (object)
        + id: 63 (number)
        + name: WaterTransport (string)


### Get service categories [GET]
Get a list of all service categories available on SiMobility Connect

+ Response 200
 + Attributes (Service Categories)

## All Service Offerings [/imp-endpoint/api/V2/ServiceOfferings] 
Parameters:

* an (optional) service offerings filter (f_service={filterJson} )
 
filterJson has following structure:

attribute | json data type | comments
--- | --- | ---
subscribed | Boolean | true, false 
category | List of String | Parking, PublicTransport, TrafficInfo, TimeTables, Ticketing, BikeSharing, CarSharing, EVCharging, WMS, JourneyPlanner, CarJourneyPlanner, GeoCoding, TaxiService 

Example: f_service=[{"subscribed": true, "category": ["PublicTransport", "CarSharing"]}]

+ Attributes (array)
    + (Service Offering Base)
        + subscribed: true (boolean) - whether service subscribed by requesting user

### Get all service categories [GET]
Get a list of all services offered on Connect.

+ Response 200 (application/json)
    + Attributes (All Service Offerings)

## Service Offerings per Partner [/imp-endpoint/api/V2/Partners/{partnerId}/ServiceOfferings]
+ Attributes (array)
    + (Service Offering Base)
        + offeringStatus: ACCEPTED

### Getting service offerings per partner [GET]
Get all services offered by an individual partner.

+ Parameters
    + partnerId (number, `42`, required) ... partner id.

+ Response 200 (application/json)
    + Attributes (Service Offerings per Partner)

# Group Process Definitions

Some of IMP resources are linked to BPMN processes. These resources contain actions in the URL, similar to "Resources/Parking/Garages/270113/Process?action=consume"
This group describes REST resources which can be used to list possible BPMN process definitions.

## Process Definitions [/imp-endpoint/api/V2/ProcessDefinitions] 
RESPONSE:
This collection contains a list of all Processes. Each service usage has the following attributes:

attribute | json data type | comments
--- | --- | ---
id | String | Process id
name | String | Process name
description | String | 
processCategory | String | Category of the process (ServiceUsage, ...)
requiredFeatures | Array | List of features (BOOKING, CANCELATION, etc.)

+ Model (application/json)
    
        [
            {
                "id": "bookingWithCancelation",
                "name": "Booking / Cancelation",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "BOOKING",
                    "CANCELATION"
                ]
            },
            {
                "id": "bookingWithoutCancelation",
                "name": "Booking",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "BOOKING"
                ]
            },
            {
                "id": "handyticketBookingProcess",
                "name": "HandyTicket Booking",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "BUY",
                    "CONFIRM"
                ]
            },
            {
                "id": "vmzParkingGarage",
                "name": "Parking Garage",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "CONSUME",
                    "RELEASE"
                ]
            }
        ]


### Getting all BPMN process definitions [GET]

+ Response 200
    
    [Process Definitions][]

## Process Definitions for Service Usage [/imp-endpoint/api/V2/ProcessDefinitions/ServiceUsage] 
RESPONSE:
This collection contains a list of process definitions of the type service usage. Each process has the following attributes:

attribute | json data type | comments
--- | --- | ---
id | String | Process id
name | String | Process name
description | String | 
processCategory | String | Category of the process (ServiceUsage, ...)
requiredFeatures | Array | List of features (BOOKING, CANCELATION, etc.)

+ Model (application/json)
    
        [
            {
                "id": "bookingWithCancelation",
                "name": "Booking / Cancelation",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "BOOKING",
                    "CANCELATION"
                ]
            },
            {
                "id": "bookingWithoutCancelation",
                "name": "Booking",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "BOOKING"
                ]
            },
            {
                "id": "handyticketBookingProcess",
                "name": "HandyTicket Booking",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "BUY",
                    "CONFIRM"
                ]
            },
            {
                "id": "vmzParkingGarage",
                "name": "Parking Garage",
                "description": null,
                "processCategory": "ServiceUsage",
                "requiredFeatures": [
                    "CONSUME",
                    "RELEASE"
                ]
            }
        ]

### Getting service usage BPMN process definitions [GET]

+ Response 200
    
    [Process Definitions for Service Usage][]

## Process Definitions for Service Subscription [/imp-endpoint/api/V2/ProcessDefinitions/ServiceSubscription] 
RESPONSE:
This collection contains a list of process definitions of the type service subscription. Each process has the following attributes:

attribute | json data type | comments
--- | --- | ---
id | String | Process id
name | String | Process name
description | String | 
processCategory | String | Category of the process (ServiceUsage, ...)
requiredFeatures | Array | List of features (BOOKING, CANCELATION, etc.)

+ Model (application/json)
    
        [
            {
                "id": "subscribePublicFree",
                "name": "Public & free",
                "description": null,
                "processCategory": "ServiceSubscription",
                "requiredFeatures": []
            },
            {
                "id": "subscribeWithAcceptance",
                "name": "Acceptance process",
                "description": null,
                "processCategory": "ServiceSubscription",
                "requiredFeatures": []
            },
            {
                "id": "subscribeWithAutomaticAcceptance",
                "name": "Automatic acceptance",
                "description": null,
                "processCategory": "ServiceSubscription",
                "requiredFeatures": []
            }
        ]

### Getting service subscription BPMN process definitions [GET]

+ Response 200
    
    [Process Definitions for Service Subscription][]


# Group System Configuration
This group contains all System related configuration interfaces.

## Get System Business Area Info [/imp-endpoint/api/V2/ApplicationInfo/SystemBusinessArea] 
Get a list of System Business Areas served by Connect. The individual business areas are specified as polygons.

attribute | json data type | comments
--- | --- | ---
businessBoundary | Object | List of MultiPolygon in Geojson format.

+ Model (application/json)

    + Body
    
            {
                "operator": null,
                "description": null,
                "serviceCategory": null,
                "businessBoundary": {
                "disjunctedBoundary": {
                    "coordinates": [
                        [
                            [
                                [
                                    13.0891553,
                                    52.3396296
                                ],
                                [
                                    13.0891553,
                                    52.6754542
                                ],
                                [
                                    13.7611176,
                                    52.6754542
                                ],
                                [
                                    13.7611176,
                                    52.3396296
                                ],
                                [
                                    13.0891553,
                                    52.3396296
                                ]
                            ]
                        ],
                        [
                            [
                                [
                                    12.69987378269434,
                                    52.29123
                                ],
                                [
                                    12.69987378269434,
                                    52.710410244573964
                                ],
                                [
                                    14.106124117970467,
                                    52.710410244573964
                                ],
                                [
                                    14.106124117970467,
                                    52.29123
                                ],
                                [
                                    12.69987378269434,
                                    52.29123
                                ]
                            ]
                        ],
                        [
                            [
                                [
                                    11.32715,
                                    48.034301
                                ],
                                [
                                    11.32715,
                                    48.260096
                                ],
                                [
                                    11.757894,
                                    48.260096
                                ],
                                [
                                    11.757894,
                                    48.034301
                                ],
                                [
                                    11.32715,
                                    48.034301
                                ]
                            ]
                        ],
                        [
                            [
                                [
                                    9.730132,
                                    53.396286
                                ],
                                [
                                    9.730132,
                                    53.739434
                                ],
                                [
                                    10.32528,
                                    53.739434
                                ],
                                [
                                    10.32528,
                                    53.396286
                                ],
                                [
                                    9.730132,
                                    53.396286
                                ]
                            ]
                        ],
                        [
                            [
                                [
                                    6.772582,
                                    50.829527
                                ],
                                [
                                    6.772582,
                                    51.084963
                                ],
                                [
                                    7.162063,
                                    51.084963
                                ],
                                [
                                    7.162063,
                                    50.829527
                                ],
                                [
                                    6.772582,
                                    50.829527
                                ]
                            ]
                        ],
                        [
                            [
                                [
                                    6.688762,
                                    51.124375
                                ],
                                [
                                    6.688762,
                                    51.352534
                                ],
                                [
                                    6.939939,
                                    51.352534
                                ],
                                [
                                    6.939939,
                                    51.124375
                                ],
                                [
                                    6.688762,
                                    51.124375
                                ]
                            ]
                        ]
                    ],
                    "type": "MultiPolygon",
                    "crs": {
                        "type": "name",
                        "properties": {
                            "name": "WGS84"
                        }
                    }
                },
                "negatedBoundary": null
                }
            }

### Getting all System Business Areas [GET]

+ Response 200

    [Get System Business Area Info][]
    
# Group Reporting
This is a group of all REST resources related to reporting.

## Report [/imp-endpoint/api/V2/Reporting/CustomReport{?reportName}] 
RESPONSE:
The response contains an image representing the report.

+ Model (text/plain)
    
        iVBORw0KGgoAAAANSUhEUgAAAfoAAAEjCAIAAABVRlT5AABHkkl


### getting a specific report [GET]

REQUEST

+ Request

    + Headers
        
            accept: text/plain
            
+ Parameters

    + reportName (string, `sp_revenue`) ... Reportname. (possible report types: mp_revenue, info_request, book_request, total_revenue, availability)

+ Response 200 

    [Report][]